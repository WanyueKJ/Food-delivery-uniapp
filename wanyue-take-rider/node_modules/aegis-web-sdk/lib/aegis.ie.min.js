/**
 *  =================================================================
 * aegis-web-sdk@1.36.2 (c) 2022 TencentCloud Real User Monitoring.
 * Author pumpkincai.
 * Last Release Time Fri Aug 19 2022 14:16:17 GMT+0800 (GMT+08:00).
 * Released under the MIT License.
 * Thanks for supporting RUM & Aegis!
 * =================================================================
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=t()}(this,function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){throw t!==undefined&&null!==t||n.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n.exports),n.exports}var o,i,U,c,F,v=(U=function(e){return e&&e.Math==Math&&e})("object"==typeof globalThis&&globalThis)||U("object"==typeof window&&window)||U("object"==typeof self&&self)||U("object"==typeof e&&e)||function(){return this}()||Function("return this")(),d=!(c=function(e){try{return!!e()}catch(t){return!0}})(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),M=!c(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),D=Function.prototype.call,m=M?D.bind(D):function(){return D.apply(D,arguments)},e={}.propertyIsEnumerable,H={f:(F=Object.getOwnPropertyDescriptor)&&!e.call({1:2},1)?function(e){e=F(this,e);return!!e&&e.enumerable}:e},q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},e=Function.prototype,B=e.bind,W=e.call,X=M&&B.bind(W,W),s=M?function(e){return e&&X(e)}:function(e){return e&&function(){return W.apply(e,arguments)}},G=s({}.toString),V=s("".slice),$=function(e){return V(G(e),8,-1)},J=Object,K=s("".split),z=c(function(){return!J("z").propertyIsEnumerable(0)})?function(e){return"String"==$(e)?K(e,""):J(e)}:J,Y=TypeError,Q=function(e){if(e==undefined)throw Y("Can't call method on "+e);return e},Z=function(e){return z(Q(e))},O=function(e){return"function"==typeof e},f=function(e){return"object"==typeof e?null!==e:O(e)},ee=function(e,t){return arguments.length<2?(n=v[e],O(n)?n:undefined):v[e]&&v[e][t];var n},te=s({}.isPrototypeOf),e=ee("navigator","userAgent")||"",B=v.process,n=v.Deno,B=B&&B.versions||n&&n.version,n=B&&B.v8,ne=i=!(i=n?0<(o=n.split("."))[0]&&o[0]<4?1:+(o[0]+o[1]):i)&&e&&(!(o=e.match(/Edge\/(\d+)/))||74<=o[1])&&(o=e.match(/Chrome\/(\d+)/))?+o[1]:i,re=!!Object.getOwnPropertySymbols&&!c(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ne&&ne<41}),oe=re&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ie=Object,ae=oe?function(e){return"symbol"==typeof e}:function(e){var t=ee("Symbol");return O(t)&&te(t.prototype,ie(e))},ue=String,ce=function(e){try{return ue(e)}catch(t){return"Object"}},se=TypeError,fe=function(e){if(O(e))return e;throw se(ce(e)+" is not a function")},le=function(e,t){t=e[t];return null==t?undefined:fe(t)},de=TypeError,pe=Object.defineProperty,he=function(e,t){try{pe(v,e,{value:t,configurable:!0,writable:!0})}catch(o){v[e]=t}return t},ge=v["__core-js_shared__"]||he("__core-js_shared__",{}),B=t(function(e){(e.exports=function(e,t){return ge[e]||(ge[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.23.4",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",source:"https://github.com/zloirock/core-js"})}),ye=Object,ve=function(e){return ye(Q(e))},me=s({}.hasOwnProperty),b=Object.hasOwn||function(e,t){return me(ve(e),t)},be=0,we=Math.random(),Ee=s(1..toString),Oe=function(e){return"Symbol("+(e===undefined?"":e)+")_"+Ee(++be+we,36)},Re=B("wks"),xe=v.Symbol,Se=xe&&xe["for"],Te=oe?xe:xe&&xe.withoutSetter||Oe,l=function(e){var t;return b(Re,e)&&(re||"string"==typeof Re[e])||(t="Symbol."+e,re&&b(xe,e)?Re[e]=xe[e]:Re[e]=(oe&&Se?Se:Te)(t)),Re[e]},Pe=TypeError,Ie=l("toPrimitive"),Le=function(e,t){if(!f(e)||ae(e))return e;var n,r,o=le(e,Ie);if(o){if(t===undefined&&(t="default"),o=m(o,e,t),!f(o)||ae(o))return o;throw Pe("Can't convert object to primitive value")}t===undefined&&(t="number");o=e,e=t;if("string"===e&&O(n=o.toString)&&!f(r=m(n,o)))return r;if(O(n=o.valueOf)&&!f(r=m(n,o)))return r;if("string"!==e&&O(n=o.toString)&&!f(r=m(n,o)))return r;throw de("Can't convert object to primitive value")},Ce=function(e){e=Le(e,"string");return ae(e)?e:e+""},Ae=v.document,je=f(Ae)&&f(Ae.createElement),ke=function(e){return je?Ae.createElement(e):{}},Ne=!d&&!c(function(){return 7!=Object.defineProperty(ke("div"),"a",{get:function(){return 7}}).a}),_e=Object.getOwnPropertyDescriptor,Ue={f:d?_e:function(e,t){if(e=Z(e),t=Ce(t),Ne)try{return _e(e,t)}catch(o){}if(b(e,t))return q(!m(H.f,e,t),e[t])}},n=d&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Fe=String,Me=TypeError,R=function(e){if(f(e))return e;throw Me(Fe(e)+" is not an object")},De=TypeError,He=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Be={f:d?n?function(e,t,n){var r;return R(e),t=Ce(t),R(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable&&(r=qe(e,t))&&r.writable&&(e[t]=n.value,n={configurable:("configurable"in n?n:r).configurable,enumerable:("enumerable"in n?n:r).enumerable,writable:!1}),He(e,t,n)}:He:function(e,t,n){if(R(e),t=Ce(t),R(n),Ne)try{return He(e,t,n)}catch(i){}if("get"in n||"set"in n)throw De("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},We=d?function(e,t,n){return Be.f(e,t,q(1,n))}:function(e,t,n){return e[t]=n,e},r=Function.prototype,a=d&&Object.getOwnPropertyDescriptor,u=b(r,"name"),Xe={EXISTS:u,PROPER:u&&"something"===function(){}.name,CONFIGURABLE:u&&(!d||a(r,"name").configurable)},Ge=s(Function.toString);O(ge.inspectSource)||(ge.inspectSource=function(e){return Ge(e)});var Ve,$e,Je,Ke,ze,Ye,Qe,Ze,et=ge.inspectSource,u=v.WeakMap,r=O(u)&&/native code/.test(et(u)),tt=B("keys"),a=function(e){return tt[e]||(tt[e]=Oe(e))},nt={},rt=v.TypeError,u=v.WeakMap,ot=(Qe=r||ge.state?(Ve=ge.state||(ge.state=new u),$e=s(Ve.get),Je=s(Ve.has),Ke=s(Ve.set),ze=function(e,t){if(Je(Ve,e))throw new rt("Object already initialized");return t.facade=e,Ke(Ve,e,t),t},Ye=function(e){return $e(Ve,e)||{}},function(e){return Je(Ve,e)}):(Ze=a("state"),nt[Ze]=!0,ze=function(e,t){if(b(e,Ze))throw new rt("Object already initialized");return t.facade=e,We(e,Ze,t),t},Ye=function(e){return b(e,Ze)?e[Ze]:{}},function(e){return b(e,Ze)}),{set:ze,get:Ye,has:Qe,enforce:function(e){return Qe(e)?Ye(e):ze(e,{})},getterFor:function(t){return function(e){if(f(e)&&(e=Ye(e)).type===t)return e;throw rt("Incompatible receiver, "+t+" required")}}}),it=t(function(e){var r=Xe.CONFIGURABLE,o=ot.enforce,t=ot.get,i=Object.defineProperty,a=d&&!c(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),e=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!b(e,"name")||r&&e.name!==t)&&(d?i(e,"name",{value:t,configurable:!0}):e.name=t),a&&n&&b(n,"arity")&&e.length!==n.arity&&i(e,"length",{value:n.arity});try{n&&b(n,"constructor")&&n.constructor?d&&i(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=undefined)}catch(m){}n=o(e);return b(n,"source")||(n.source=u.join("string"==typeof t?t:"")),e};Function.prototype.toString=e(function(){return O(this)&&t(this).source||et(this)},"toString")}),at=function(e,t,n,r){var o=(r=r||{}).enumerable,i=r.name!==undefined?r.name:t;if(O(n)&&it(n,i,r),r.global)o?e[t]=n:he(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(c){}o?e[t]=n:Be.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},ut=Math.ceil,ct=Math.floor,st=Math.trunc||function(e){e=+e;return(0<e?ct:ut)(e)},ft=function(e){e=+e;return e!=e||0==e?0:st(e)},lt=Math.max,dt=Math.min,pt=function(e,t){e=ft(e);return e<0?lt(e+t,0):dt(e,t)},ht=Math.min,gt=function(e){return 0<e?ht(ft(e),9007199254740991):0},yt=function(e){return gt(e.length)},r=function(u){return function(e,t,n){var r,o=Z(e),i=yt(o),a=pt(n,i);if(u&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((u||a in o)&&o[a]===t)return u||a||0;return!u&&-1}},u={includes:r(!0),indexOf:r(!1)},vt=u.indexOf,mt=s([].push),bt=function(e,t){var n,r=Z(e),o=0,i=[];for(n in r)!b(nt,n)&&b(r,n)&&mt(i,n);for(;t.length>o;)!b(r,n=t[o++])||~vt(i,n)||mt(i,n);return i},wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Et=wt.concat("length","prototype"),Ot={f:Object.getOwnPropertyNames||function(e){return bt(e,Et)}},Rt={f:Object.getOwnPropertySymbols},xt=s([].concat),St=ee("Reflect","ownKeys")||function(e){var t=Ot.f(R(e)),n=Rt.f;return n?xt(t,n(e)):t},Tt=/#|\.prototype\./,r=function(e,t){e=It[Pt(e)];return e==Ct||e!=Lt&&(O(t)?c(t):!!t)},Pt=r.normalize=function(e){return String(e).replace(Tt,".").toLowerCase()},It=r.data={},Lt=r.NATIVE="N",Ct=r.POLYFILL="P",At=r,jt=Ue.f,g=function(e,t){var n,r,o,i,a=e.target,u=e.global,c=e.stat;if(n=u?v:c?v[a]||he(a,{}):(v[a]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(i=jt(n,r))&&i.value:n[r],!At(u?r:a+(c?".":"#")+r,e.forced)&&i!==undefined){if(typeof o==typeof i)continue;for(var s=o,f=i,l=y=g=h=p=d=void 0,d=St(f),p=Be.f,h=Ue.f,g=0;g<d.length;g++){var y=d[g];b(s,y)||l&&b(l,y)||p(s,y,h(f,y))}}(e.sham||i&&i.sham)&&We(o,"sham",!0),at(n,r,o,e)}},kt=s(s.bind),Nt=function(e,t){return fe(e),t===undefined?e:M?kt(e,t):function(){return e.apply(t,arguments)}},_t=Array.isArray||function(e){return"Array"==$(e)},r={},r=(r[l("toStringTag")]="z","[object z]"===String(r)),Ut=l("toStringTag"),Ft=Object,Mt="Arguments"==$(function(){return arguments}()),Dt=r?$:function(e){var n,t;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(e=Ft(e),Ut))?n:Mt?$(e):"Object"==(t=$(e))&&O(e.callee)?"Arguments":t},Ht=function(){},qt=[],Bt=ee("Reflect","construct"),Wt=/^\s*(?:class|function)\b/,Xt=s(Wt.exec),Gt=!Wt.exec(Ht),Vt=function(e){if(!O(e))return!1;try{return Bt(Ht,qt,e),!0}catch(t){return!1}},p=function(e){if(!O(e))return!1;switch(Dt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Gt||!!Xt(Wt,et(e))}catch(t){return!0}};p.sham=!0;var $t,Jt=!Bt||c(function(){var e;return Vt(Vt.call)||!Vt(Object)||!Vt(function(){e=!0})||e})?p:Vt,Kt=l("species"),zt=Array,Yt=function(e,t){return _t(e=e)&&(n=e.constructor,(Jt(n)&&(n===zt||_t(n.prototype))||f(n)&&null===(n=n[Kt]))&&(n=undefined)),new(n===undefined?zt:n)(0===t?0:t);var n},Qt=s([].push),p=function(d){var p=1==d,h=2==d,g=3==d,y=4==d,v=6==d,m=7==d,b=5==d||v;return function(e,t,n,r){for(var o,i,a=ve(e),u=z(a),c=Nt(t,n),s=yt(u),f=0,t=r||Yt,l=p?t(e,s):h||m?t(e,0):undefined;f<s;f++)if((b||f in u)&&(i=c(o=u[f],f,a),d))if(p)l[f]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return f;case 2:Qt(l,o)}else switch(d){case 4:return!1;case 7:Qt(l,o)}return v?-1:g||y?y:l}},p={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)},Zt=Object.keys||function(e){return bt(e,wt)},en={f:d&&!n?Object.defineProperties:function(e,t){R(e);for(var n,r=Z(t),o=Zt(t),i=o.length,a=0;a<i;)Be.f(e,n=o[a++],r[n]);return e}},tn=ee("document","documentElement"),nn=a("IE_PROTO"),rn=function(){},on=function(e){return"<script>"+e+"<\/script>"},an=function(e){e.write(on("")),e.close();var t=e.parentWindow.Object;return e=null,t},un=function(){try{$t=new ActiveXObject("htmlfile")}catch(i){}var e;un="undefined"==typeof document||document.domain&&$t?an($t):((e=ke("iframe")).style.display="none",tn.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(on("document.F=Object")),e.close(),e.F);for(var t=wt.length;t--;)delete un.prototype[wt[t]];return un()},cn=(nt[nn]=!0,Object.create||function(e,t){var n;return null!==e?(rn.prototype=R(e),n=new rn,rn.prototype=null,n[nn]=e):n=un(),t===undefined?n:en.f(n,t)}),n=Be.f,sn=l("unscopables"),fn=Array.prototype,n=(fn[sn]==undefined&&n(fn,sn,{configurable:!0,value:cn(null)}),function(e){fn[sn][e]=!0}),ln=p.find,dn=!0,h=("find"in[]&&Array(1).find(function(){dn=!1}),g({target:"Array",proto:!0,forced:dn},{find:function(e){return ln(this,e,1<arguments.length?arguments[1]:undefined)}}),n("find"),r?{}.toString:function(){return"[object "+Dt(this)+"]"}),r=(r||at(Object.prototype,"toString",h,{unsafe:!0}),Be.f);g({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!d},{defineProperty:r});var pn=String,x=function(e){if("Symbol"===Dt(e))throw TypeError("Cannot convert a Symbol value to a string");return pn(e)},hn=l("match"),gn=function(e){var t;return f(e)&&((t=e[hn])!==undefined?!!t:"RegExp"==$(e))},yn=TypeError,vn=l("match"),h=Ue.f,mn=s("".startsWith),bn=s("".slice),wn=Math.min,r=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[vn]=!1,"/./"[e](t)}catch(i){}}return!1}("startsWith"),h=!(r||(!(h=h(String.prototype,"startsWith"))||h.writable));g({target:"String",proto:!0,forced:!h&&!r},{startsWith:function(e){var t=x(Q(this)),n=e;if(gn(n))throw yn("The method doesn't accept regular expressions");n=gt(wn(1<arguments.length?arguments[1]:undefined,t.length)),e=x(e);return mn?mn(t,e,n):bn(t,n,n+e.length)===e}});var En,On={},h=!c(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Rn=a("IE_PROTO"),xn=Object,Sn=xn.prototype,Tn=h?xn.getPrototypeOf:function(e){e=ve(e);if(b(e,Rn))return e[Rn];var t=e.constructor;return O(t)&&e instanceof t?t.prototype:e instanceof xn?Sn:null},Pn=l("iterator"),r=!1,a=([].keys&&("next"in(a=[].keys())?(a=Tn(Tn(a)))!==Object.prototype&&(En=a):r=!0),En!=undefined&&!c(function(){var e={};return En[Pn].call(e)!==e})||(En={}),O(En[Pn])||at(En,Pn,function(){return this}),{IteratorPrototype:En,BUGGY_SAFARI_ITERATORS:r}),In=Be.f,Ln=l("toStringTag"),Cn=function(e,t,n){(e=e&&!n?e.prototype:e)&&!b(e,Ln)&&In(e,Ln,{configurable:!0,value:t})},An=a.IteratorPrototype,jn=function(){return this},kn=String,Nn=TypeError,_n=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,e={};try{(r=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),o=e instanceof Array}catch(i){}return function(e,t){R(e);var n=t;if("object"==typeof n||O(n))return o?r(e,t):e.__proto__=t,e;throw Nn("Can't set "+kn(n)+" as a prototype")}}():undefined),Un=Xe.PROPER,Fn=Xe.CONFIGURABLE,Mn=a.IteratorPrototype,Dn=a.BUGGY_SAFARI_ITERATORS,Hn=l("iterator"),qn=function(){return this},r=function(e,t,n,r,o,i,a){h=t+" Iterator",(s=n).prototype=cn(An,{next:q(1,r)}),Cn(s,h,!1),On[h]=jn;var u,c,r=function(e){if(e===o&&p)return p;if(!Dn&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},s=t+" Iterator",f=!1,l=e.prototype,d=l[Hn]||l["@@iterator"]||o&&l[o],p=!Dn&&d||r(o),h="Array"==t&&l.entries||d;if(h&&(e=Tn(h.call(new e)))!==Object.prototype&&e.next&&(Tn(e)!==Mn&&(_n?_n(e,Mn):O(e[Hn])||at(e,Hn,qn)),Cn(e,s,!0)),Un&&"values"==o&&d&&"values"!==d.name&&(Fn?We(l,"name","values"):(f=!0,p=function(){return m(d,this)})),o)if(u={values:r("values"),keys:i?p:r("keys"),entries:r("entries")},a)for(c in u)!Dn&&!f&&c in l||at(l,c,u[c]);else g({target:t,proto:!0,forced:Dn||f},u);return l[Hn]!==p&&at(l,Hn,p,{name:o}),On[t]=p,u},a=Be.f,Bn=ot.set,Wn=ot.getterFor("Array Iterator"),Xn=r(Array,"Array",function(e,t){Bn(this,{type:"Array Iterator",target:Z(e),index:0,kind:t})},function(){var e=Wn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=undefined,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),y=On.Arguments=On.Array;if(n("keys"),n("values"),n("entries"),d&&"values"!==y.name)try{a(y,"name",{value:"values"})}catch(_){}var Gn=s("".charAt),Vn=s("".charCodeAt),$n=s("".slice),y=function(o){return function(e,t){var n,e=x(Q(e)),t=ft(t),r=e.length;return t<0||r<=t?o?"":undefined:(n=Vn(e,t))<55296||56319<n||t+1===r||(r=Vn(e,t+1))<56320||57343<r?o?Gn(e,t):n:o?$n(e,t,t+2):r-56320+(n-55296<<10)+65536}},a={codeAt:y(!1),charAt:y(!0)},Jn=a.charAt,Kn=ot.set,zn=ot.getterFor("String Iterator"),Yn=(r(String,"String",function(e){Kn(this,{type:"String Iterator",string:x(e),index:0})},function(){var e=zn(this),t=e.string,n=e.index;return n>=t.length?{value:undefined,done:!0}:(t=Jn(t,n),e.index+=t.length,{value:t,done:!1})}),function(e,t,n){t=Ce(t);t in e?Be.f(e,t,q(0,n)):e[t]=n}),Qn=Array,Zn=Math.max,er=function(e,t,n){for(var r=yt(e),o=pt(t,r),i=pt(n===undefined?r:n,r),a=Qn(Zn(i-o,0)),u=0;o<i;o++,u++)Yn(a,u,e[o]);return a.length=u,a},tr=Ot.f,nr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],rr={f:function(e){if(!nr||"Window"!=$(e))return tr(Z(e));try{return tr(e)}catch(_){return er(nr)}}},or=c(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}),ir=Object.isExtensible,ar=c(function(){ir(1)})||or?function(e){return!!f(e)&&(!or||"ArrayBuffer"!=$(e))&&(!ir||ir(e))}:ir,ur=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),y=t(function(e){var t=Be.f,n=!1,a=Oe("meta"),r=0,o=function(e){t(e,a,{value:{objectID:"O"+r++,weakData:{}}})},u=e.exports={enable:function(){u.enable=function(){},n=!0;var o=Ot.f,i=s([].splice),e={};e[a]=1,o(e).length&&(Ot.f=function(e){for(var t=o(e),n=0,r=t.length;n<r;n++)if(t[n]===a){i(t,n,1);break}return t},g({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:rr.f}))},fastKey:function(e,t){if(!f(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!b(e,a)){if(!ar(e))return"F";if(!t)return"E";o(e)}return e[a].objectID},getWeakData:function(e,t){if(!b(e,a)){if(!ar(e))return!0;if(!t)return!1;o(e)}return e[a].weakData},onFreeze:function(e){return ur&&n&&ar(e)&&!b(e,a)&&o(e),e}};nt[a]=!0}),cr=l("iterator"),sr=Array.prototype,fr=l("iterator"),lr=function(e){if(e!=undefined)return le(e,fr)||le(e,"@@iterator")||On[Dt(e)]},dr=TypeError,pr=function(e,t,n){var r,o;R(e);try{if(!(r=le(e,"return"))){if("throw"===t)throw n;return n}r=m(r,e)}catch(_){o=!0,r=_}if("throw"===t)throw n;if(o)throw r;return R(r),n},hr=TypeError,gr=function(e,t){this.stopped=e,this.result=t},yr=gr.prototype,vr=function(e,t,n){var r,o,i,a,u,c,s=n&&n.that,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=Nt(t,s),g=function(e){return r&&pr(r,"normal",e),new gr(!0,e)},y=function(e){return f?(R(e),p?h(e[0],e[1],g):h(e[0],e[1])):p?h(e,g):h(e)};if(l)r=e.iterator;else if(d)r=e;else{if(!(n=lr(e)))throw hr(ce(e)+" is not iterable");if(n!==undefined&&(On.Array===n||sr[cr]===n)){for(o=0,i=yt(e);o<i;o++)if((a=y(e[o]))&&te(yr,a))return a;return new gr(!1)}r=function(e,t){t=arguments.length<2?lr(e):t;if(fe(t))return R(m(t,e));throw dr(ce(e)+" is not iterable")}(e,n)}for(u=(l?e:r).next;!(c=m(u,r)).done;){try{a=y(c.value)}catch(_){pr(r,"throw",_)}if("object"==typeof a&&a&&te(yr,a))return a}return new gr(!1)},mr=TypeError,br=function(e,t){if(te(t,e))return e;throw mr("Incorrect invocation")},wr=l("iterator"),Er=!1;try{var Or=0,Rr={next:function(){return{done:!!Or++}},"return":function(){Er=!0}};Rr[wr]=function(){return this},Array.from(Rr,function(){throw 2})}catch(_){}var xr,Sr,Tr,Pr,Ir,Lr,Cr,Ar,r=function(e,t){if(!t&&!Er)return!1;var n=!1;try{var r={};r[wr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(_){}return n},jr=function(e,t,n){return _n&&O(t=t.constructor)&&t!==n&&f(t=t.prototype)&&t!==n.prototype&&_n(e,t),e},kr=function(e,t,n){for(var r in t)at(e,r,t[r],n);return e},Nr=y.getWeakData,_r=ot.set,Ur=ot.getterFor,Fr=p.find,Mr=p.findIndex,Dr=s([].splice),Hr=0,qr=function(e){return e.frozen||(e.frozen=new Br)},Br=function(){this.entries=[]},Wr=function(e,t){return Fr(e.entries,function(e){return e[0]===t})},Xr=(Br.prototype={get:function(e){e=Wr(this,e);if(e)return e[1]},has:function(e){return!!Wr(this,e)},set:function(e,t){var n=Wr(this,e);n?n[1]=t:this.entries.push([e,t])},"delete":function(t){var e=Mr(this.entries,function(e){return e[0]===t});return~e&&Dr(this.entries,e,1),!!~e}},Rr=function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},T={getConstructor:function(e,n,r,o){var e=e(function(e,t){br(e,i),_r(e,{type:n,id:Hr++,frozen:undefined}),t!=undefined&&vr(t,e[o],{that:e,AS_ENTRIES:r})}),i=e.prototype,a=Ur(n),u=function(e,t,n){var r=a(e),o=Nr(R(t),!0);return!0===o?qr(r).set(t,n):o[r.id]=n,e};return kr(i,{"delete":function(e){var t=a(this);if(!f(e))return!1;var n=Nr(e);return!0===n?qr(t)["delete"](e):n&&b(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!f(e))return!1;var n=Nr(e);return!0===n?qr(t).has(e):n&&b(n,t.id)}}),kr(i,r?{get:function(e){var t,n=a(this);if(f(e))return!0===(t=Nr(e))?qr(n).get(e):t?t[n.id]:undefined},set:function(e,t){return u(this,e,t)}}:{add:function(e){return u(this,e,!0)}}),e}},Sr=-1!==(S="WeakSet").indexOf("Map"),Tr=-1!==S.indexOf("Weak"),Pr=Sr?"set":"add",Ir=v[S],Lr=Ir&&Ir.prototype,E={},w=function(e){var n=s(Lr[e]);at(Lr,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(Tr&&!f(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return Tr&&!f(e)?undefined:n(this,0===e?0:e)}:"has"==e?function(e){return!(Tr&&!f(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})},At(S,!O(Cr=Ir)||!(Tr||Lr.forEach&&!c(function(){(new Ir).entries().next()})))?(Cr=T.getConstructor(Rr,S,Sr,Pr),y.enable()):At(S,!0)&&(y=(xr=new Cr)[Pr](Tr?{}:-0,1)!=xr,Vr=c(function(){xr.has(1)}),Gr=r(function(e){new Ir(e)}),$r=!Tr&&c(function(){for(var e=new Ir,t=5;t--;)e[Pr](t,t);return!e.has(-0)}),Gr||(((Cr=Rr(function(e,t){br(e,Lr);e=jr(new Ir,e,Cr);return t!=undefined&&vr(t,e[Pr],{that:e,AS_ENTRIES:Sr}),e})).prototype=Lr).constructor=Cr),(Vr||$r)&&(w("delete"),w("has"),Sr&&w("get")),($r||y)&&w(Pr),Tr&&Lr.clear&&delete Lr.clear),E[S]=Cr,g({global:!0,constructor:!0,forced:Cr!=Ir},E),Cn(Cr,S),Tr||T.setStrong(Cr,S,Sr),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Gr=ke("span").classList,Vr=Gr&&Gr.constructor&&Gr.constructor.prototype,$r=Vr===Object.prototype?undefined:Vr,Jr=l("iterator"),Kr=l("toStringTag"),zr=Xn.values,Yr=function(e,t){if(e){if(e[Jr]!==zr)try{We(e,Jr,zr)}catch(_){e[Jr]=zr}if(e[Kr]||We(e,Kr,t),Xr[t])for(var n in Xn)if(e[n]!==Xn[n])try{We(e,n,Xn[n])}catch(_){e[n]=Xn[n]}}};for(Ar in Xr)Yr(v[Ar]&&v[Ar].prototype,Ar);Yr($r,"DOMTokenList");var Qr,Zr,eo,to=Date,no=s(to.prototype.getTime),y=(g({target:"Date",stat:!0},{now:function(){return no(new to)}}),Date.prototype),ro=s(y.toString),oo=s(y.getTime),w=("Invalid Date"!=String(new Date(NaN))&&at(y,"toString",function(){var e=oo(this);return e==e?ro(this):"Invalid Date"}),Xe.EXISTS),E=Be.f,S=Function.prototype,io=s(S.toString),ao=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,uo=s(ao.exec),T=(d&&!w&&E(S,"name",{configurable:!0,get:function(){try{return uo(ao,io(this))[1]}catch(_){return""}}}),function(e,t){var n=[][e];return!!n&&c(function(){n.call(null,t||function(){return 1},1)})}),co=p.forEach,so=T("forEach")?[].forEach:function(e){return co(this,e,1<arguments.length?arguments[1]:undefined)},fo=(g({target:"Array",proto:!0,forced:[].forEach!=so},{forEach:so}),function(e){if(e&&e.forEach!==so)try{We(e,"forEach",so)}catch(_){e.forEach=so}});for(Qr in Xr)Xr[Qr]&&fo(v[Qr]&&v[Qr].prototype);function lo(e){this.name="__st"+(1e9*Math.random()>>>0)+Zr+"__",null!=e&&e.forEach(this.add,this),Zr+=1}fo($r),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}return undefined}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(Zr=Date.now()%1e9,lo.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},lo.prototype["delete"]=function(e){return!!e[this.name]&&(e[this.name]=undefined,!0)},lo.prototype.has=function(e){return!!e[this.name]},eo=lo,Object.defineProperty(window,"WeakSet",{value:function(e){return new eo(e)}}));var po=Object.assign,ho=Object.defineProperty,go=s([].concat),y=!po||c(function(){if(d&&1!==po({b:1},po(ho({},"a",{enumerable:!0,get:function(){ho(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=po({},e)[n]||"abcdefghijklmnopqrst"!=Zt(po({},t)).join("")})?function(e,t){for(var n=ve(e),r=arguments.length,o=1,i=Rt.f,a=H.f;o<r;)for(var u,c=z(arguments[o++]),s=i?go(Zt(c),i(c)):Zt(c),f=s.length,l=0;l<f;)u=s[l++],d&&!m(a,c,u)||(n[u]=c[u]);return n}:po,w=(g({target:"Object",stat:!0,arity:2,forced:Object.assign!==y},{assign:y}),c(function(){Zt(1)})),yo=(g({target:"Object",stat:!0,forced:w},{keys:function(e){return Zt(ve(e))}}),Ue.f),S=c(function(){yo(1)});function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}g({target:"Object",stat:!0,forced:!d||S,sham:!d},{getOwnPropertyDescriptor:function(e,t){return yo(Z(e),t)}}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===undefined||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((r=arguments[n])!==undefined&&null!==r)for(var r=Object(r),o=Object.keys(Object(r)),i=0,a=o.length;i<a;i++){var u=o[i],c=Object.getOwnPropertyDescriptor(r,u);null!=c&&c.enumerable&&(t[u]=r[u])}return t}});var E=rr.f,y=c(function(){return!Object.getOwnPropertyNames(1)}),w=(g({target:"Object",stat:!0,forced:y},{getOwnPropertyNames:E}),g({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=Z(e),o=Ue.f,i=St(r),a={},u=0;i.length>u;)(n=o(r,t=i[u++]))!==undefined&&Yn(a,t,n);return a}}),Function.prototype),mo=w.apply,bo=w.call,wo="object"==typeof Reflect&&Reflect.apply||(M?bo.bind(mo):function(){return bo.apply(mo,arguments)}),Eo=s([].slice),Oo=ee("JSON","stringify"),Ro=s(/./.exec),xo=s("".charAt),So=s("".charCodeAt),To=s("".replace),Po=s(1..toString),Io=/[\uD800-\uDFFF]/g,Lo=/^[\uD800-\uDBFF]$/,Co=/^[\uDC00-\uDFFF]$/,Ao=!re||c(function(){var e=ee("Symbol")();return"[null]"!=Oo([e])||"{}"!=Oo({a:e})||"{}"!=Oo(Object(e))}),jo=c(function(){return'"\\udf06\\ud834"'!==Oo("\udf06\ud834")||'"\\udead"'!==Oo("\udead")}),ko=function(e,t){var n=Eo(arguments),r=t;if((f(t)||e!==undefined)&&!ae(e))return _t(t)||(t=function(e,t){if(O(r)&&(t=m(r,this,e,t)),!ae(t))return t}),n[1]=t,wo(Oo,null,n)},No=function(e,t,n){var r=xo(n,t-1),n=xo(n,t+1);return Ro(Lo,e)&&!Ro(Co,n)||Ro(Co,e)&&!Ro(Lo,r)?"\\u"+Po(So(e,0),16):e},_o=(Oo&&g({target:"JSON",stat:!0,arity:3,forced:Ao||jo},{stringify:function(e,t,n){var r=Eo(arguments),r=wo(Ao?ko:Oo,null,r);return jo&&"string"==typeof r?To(r,Io,No):r}}),l("species")),S=function(t){return 51<=ne||!c(function(){var e=[];return(e.constructor={})[_o]=function(){return{foo:1}},1!==e[t](Boolean).foo})},Uo=p.filter,y=S("filter"),Fo=(g({target:"Array",proto:!0,forced:!y},{filter:function(e){return Uo(this,e,1<arguments.length?arguments[1]:undefined)}}),u.indexOf),Mo=s([].indexOf),Do=!!Mo&&1/Mo([1],1,-0)<0,E=T("indexOf"),Ho=(g({target:"Array",proto:!0,forced:Do||!E},{indexOf:function(e){var t=1<arguments.length?arguments[1]:undefined;return Do?Mo(this,e,t)||0:Fo(this,e,t)}}),TypeError),qo=function(e){if(9007199254740991<e)throw Ho("Maximum allowed index exceeded");return e},Bo=TypeError,Wo=function(e,t){if(!delete e[t])throw Bo("Cannot delete property "+ce(t)+" of "+ce(e))},w=S("splice"),Xo=Math.max,Go=Math.min,Vo=(g({target:"Array",proto:!0,forced:!w},{splice:function(e,t){var n,r,o,i,a,u,c=ve(this),s=yt(c),f=pt(e,s),e=arguments.length;for(0===e?n=r=0:r=1===e?(n=0,s-f):(n=e-2,Go(Xo(ft(t),0),s-f)),qo(s+n-r),o=Yt(c,r),i=0;i<r;i++)(a=f+i)in c&&Yn(o,i,c[a]);if(n<(o.length=r)){for(i=f;i<s-r;i++)u=i+n,(a=i+r)in c?c[u]=c[a]:Wo(c,u);for(i=s;s-r+n<i;i--)Wo(c,i-1)}else if(r<n)for(i=s-r;f<i;i--)u=i+n-1,(a=i+r-1)in c?c[u]=c[a]:Wo(c,u);for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=s-r+n,o}}),s([].join)),y=z!=Object,u=T("join",","),$o=(g({target:"Array",proto:!0,forced:y||!u},{join:function(e){return Vo(Z(this),e===undefined?",":e)}}),p.map),E=S("map"),w=(g({target:"Array",proto:!0,forced:!E},{map:function(e){return $o(this,e,1<arguments.length?arguments[1]:undefined)}}),g({target:"Object",stat:!0},{setPrototypeOf:_n}),c(function(){Tn(1)})),Jo=(g({target:"Object",stat:!0,forced:w,sham:!h},{getPrototypeOf:function(e){return Tn(ve(e))}}),function(e,t){return(Jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)}),P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ko(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var zo=["ext1","ext2","ext3","level","trace","tag","seq","code"];g({target:"Array",stat:!0},{isArray:_t});var Yo=function(){var e=R(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Qo=v.RegExp,y=c(function(){var e=Qo("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),u=y||c(function(){return!Qo("a","y").sticky}),E={BROKEN_CARET:y||c(function(){var e=Qo("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:u,UNSUPPORTED_Y:y},Zo=v.RegExp,w=c(function(){var e=Zo(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),ei=v.RegExp,h=c(function(){var e=ei("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),ti=ot.get,ni=B("native-string-replace",String.prototype.replace),ri=RegExp.prototype.exec,oi=ri,ii=s("".charAt),ai=s("".indexOf),ui=s("".replace),ci=s("".slice),si=(u=/b*/g,m(ri,y=/a/,"a"),m(ri,u,"a"),0!==y.lastIndex||0!==u.lastIndex),fi=E.BROKEN_CARET,li=/()??/.exec("")[1]!==undefined,di=oi=si||li||fi||w||h?function(e){var t,n,r,o,i,a,u=this,c=ti(u),e=x(e),s=c.raw;if(s)return s.lastIndex=u.lastIndex,l=m(oi,s,e),u.lastIndex=s.lastIndex,l;var f=c.groups,s=fi&&u.sticky,l=m(Yo,u),c=u.source,d=0,p=e;if(s&&(l=ui(l,"y",""),-1===ai(l,"g")&&(l+="g"),p=ci(e,u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==ii(e,u.lastIndex-1))&&(c="(?: "+c+")",p=" "+p,d++),t=new RegExp("^(?:"+c+")",l)),li&&(t=new RegExp("^"+c+"$(?!\\s)",l)),si&&(n=u.lastIndex),r=m(ri,s?t:u,p),s?r?(r.input=ci(r.input,d),r[0]=ci(r[0],d),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:si&&r&&(u.lastIndex=u.global?r.index+r[0].length:n),li&&r&&1<r.length&&m(ni,r[0],t,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===undefined&&(r[o]=undefined)}),r&&f)for(r.groups=i=cn(null),o=0;o<f.length;o++)i[(a=f[o])[0]]=r[a[1]];return r}:oi,pi=(g({target:"RegExp",proto:!0,forced:/./.exec!==di},{exec:di}),l("species")),hi=RegExp.prototype,B=function(n,e,t,r){var a,o=l(n),u=!c(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),i=u&&!c(function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[pi]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});u&&i&&!t||(a=s(/./[o]),i=e(o,""[n],function(e,t,n,r,o){var e=s(e),i=t.exec;return i===di||i===hi.exec?u&&!o?{done:!0,value:a(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}}),at(String.prototype,n,i[0]),at(hi,o,i[1])),r&&We(hi[o],"sham",!0)},gi=a.charAt,yi=function(e,t,n){return t+(n?gi(e,t).length:1)},vi=Math.floor,mi=s("".charAt),bi=s("".replace),wi=s("".slice),Ei=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Oi=/\$([$&'`]|\d{1,2})/g,Ri=TypeError,xi=function(e,t){var n=e.exec;if(O(n))return null!==(n=m(n,e,t))&&R(n),n;if("RegExp"===$(e))return m(di,e,t);throw Ri("RegExp#exec called on incompatible receiver")},Si=l("replace"),Ti=Math.max,Pi=Math.min,Ii=s([].concat),Li=s([].push),Ci=s("".indexOf),Ai=s("".slice),y="$0"==="a".replace(/./,"$0"),ji=!!/./[Si]&&""===/./[Si]("a","$0"),ki=(B("replace",function(e,b,w){var E=ji?"$":"$0";return[function(e,t){var n=Q(this),r=e==undefined?undefined:le(e,Si);return r?m(r,e,n,t):m(b,x(n),e,t)},function(e,t){var n=R(this),r=x(e);if("string"==typeof t&&-1===Ci(t,E)&&-1===Ci(t,"$<")){e=w(b,n,r,t);if(e.done)return e.value}var o,i=O(t),a=(i||(t=x(t)),n.global);a&&(o=n.unicode,n.lastIndex=0);for(var u=[];;){var c=xi(n,r);if(null===c)break;if(Li(u,c),!a)break;""===x(c[0])&&(n.lastIndex=yi(r,gt(n.lastIndex),o))}for(var s,f="",l=0,d=0;d<u.length;d++){for(var p=x((c=u[d])[0]),h=Ti(Pi(ft(c.index),r.length),0),g=[],y=1;y<c.length;y++)Li(g,(s=c[y])===undefined?s:String(s));var v=c.groups,m=i?(m=Ii([p],g,h,r),v!==undefined&&Li(m,v),x(wo(t,undefined,m))):function(i,a,u,c,s,e){var f=u+i.length,l=c.length,t=Oi;return s!==undefined&&(s=ve(s),t=Ei),bi(e,t,function(e,t){var n;switch(mi(t,0)){case"$":return"$";case"&":return i;case"`":return wi(a,0,u);case"'":return wi(a,f);case"<":n=s[wi(t,1,-1)];break;default:var r,o=+t;if(0==o)return e;if(l<o)return 0!==(r=vi(o/10))&&r<=l?c[r-1]===undefined?mi(t,1):c[r-1]+mi(t,1):e;n=c[o-1]}return n===undefined?"":n})}(p,r,h,g,v,t);l<=h&&(f+=Ai(r,l,h)+m,l=h+p.length)}return f+Ai(r,l)}]},!!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!y||ji),TypeError),Ni=l("species"),_i=function(e,t){var n,e=R(e).constructor;if(e===undefined||(n=R(e)[Ni])==undefined)return t;e=n;if(Jt(e))return e;throw ki(ce(e)+" is not a constructor")},Ui=E.UNSUPPORTED_Y,Fi=Math.min,Mi=[].push,Di=s(/./.exec),Hi=s(Mi),qi=s("".slice);B("split",function(o,h,g){var y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var n=x(Q(this)),r=t===undefined?4294967295:t>>>0;if(0==r)return[];if(e===undefined)return[n];if(!gn(e))return m(h,n,e,r);for(var o,i,a,u=[],t=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,s=new RegExp(e.source,t+"g");(o=m(di,s,n))&&!((i=s.lastIndex)>c&&(Hi(u,qi(n,c,o.index)),1<o.length&&o.index<n.length&&wo(Mi,u,er(o,1)),a=o[0].length,c=i,r<=u.length));)s.lastIndex===o.index&&s.lastIndex++;return c===n.length?!a&&Di(s,"")||Hi(u,""):Hi(u,qi(n,c)),r<u.length?er(u,0,r):u}:"0".split(undefined,0).length?function(e,t){return e===undefined&&0===t?[]:m(h,this,e,t)}:h;return[function(e,t){var n=Q(this),r=e==undefined?undefined:le(e,o);return r?m(r,e,n,t):m(y,x(n),e,t)},function(e,t){var n=R(this),r=x(e),e=g(y,n,r,t,y!==h);if(e.done)return e.value;var e=_i(n,RegExp),o=n.unicode,i=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(Ui?"g":"y"),a=new e(Ui?"^(?:"+n.source+")":n,i),u=t===undefined?4294967295:t>>>0;if(0==u)return[];if(0===r.length)return null===xi(a,r)?[r]:[];for(var c=0,s=0,f=[];s<r.length;){a.lastIndex=Ui?0:s;var l,d=xi(a,Ui?qi(r,s):r);if(null===d||(l=Fi(gt(a.lastIndex+(Ui?s:0)),r.length))===c)s=yi(r,s,o);else{if(Hi(f,qi(r,c,s)),f.length===u)return f;for(var p=1;p<=d.length-1;p++)if(Hi(f,d[p]),f.length===u)return f;s=c=l}}return Hi(f,qi(r,c)),f}]},!!c(function(){var e=/(?:)/,t=e.exec,e=(e.exec=function(){return t.apply(this,arguments)},"ab".split(e));return 2!==e.length||"a"!==e[0]||"b"!==e[1]}),Ui);Bi=!1,(u=/[ac]/).exec=function(){return Bi=!0,/./.exec.apply(this,arguments)};var Bi,w=!0===u.test("abc")&&Bi,Wi=TypeError,Xi=s(/./.test),Gi=(g({target:"RegExp",proto:!0,forced:!w},{test:function(e){var t=this.exec;if(!O(t))return Xi(this,e);t=m(t,this,e);if(null===t||f(t))return!!t;throw new Wi("RegExp exec method returned something other than an Object or null")}}),RegExp.prototype),h=Xe.PROPER,Vi=RegExp.prototype.toString,a=c(function(){return"/a/b"!=Vi.call({source:"a",flags:"b"})}),y=h&&"toString"!=Vi.name,$i=((a||y)&&at(RegExp.prototype,"toString",function(){var e,t=R(this);return"/"+x(t.source)+"/"+x((e=(t=t).flags)!==undefined||"flags"in Gi||b(t,"flags")||!te(Gi,t)?e:m(Yo,t))},{unsafe:!0}),p.some),E=T("some"),Ji=(g({target:"Array",proto:!0,forced:!E},{some:function(e){return $i(this,e,1<arguments.length?arguments[1]:undefined)}}),l("isConcatSpreadable")),u=51<=ne||!c(function(){var e=[];return e[Ji]=!1,e.concat()[0]!==e}),w=S("concat"),Ki=(g({target:"Array",proto:!0,arity:1,forced:!u||!w},{concat:function(e){for(var t,n,r,o=ve(this),i=Yt(o,0),a=0,u=-1,c=arguments.length;u<c;u++)if(function(e){if(!f(e))return!1;var t=e[Ji];return t!==undefined?!!t:_t(e)}(r=-1===u?o:arguments[u]))for(n=yt(r),qo(a+n),t=0;t<n;t++,a++)t in r&&Yn(i,a,r[t]);else qo(a+1),Yn(i,a++,r);return i.length=a,i}}),s(1..valueOf)),zi="\t\n\x0B\f\r                　\u2028\u2029\ufeff",Yi=s("".replace),h="["+zi+"]",Qi=RegExp("^"+h+h+"*"),Zi=RegExp(h+h+"*$"),a=function(t){return function(e){e=x(Q(e));return 1&t&&(e=Yi(e,Qi,"")),e=2&t?Yi(e,Zi,""):e}},y={start:a(1),end:a(2),trim:a(3)},E=Ot.f,ea=Ue.f,ta=Be.f,na=y.trim,ra=v.Number,oa=ra.prototype,ia=v.TypeError,aa=s("".slice),ua=s("".charCodeAt),ca=function(e){var t,n,r,o,i,a,u,c=Le(e,"number");if(ae(c))throw ia("Cannot convert a Symbol value to a number");if("string"==typeof c&&2<c.length)if(c=na(c),43===(e=ua(c,0))||45===e){if(88===(t=ua(c,2))||120===t)return NaN}else if(48===e){switch(ua(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=(o=aa(c,2)).length,a=0;a<i;a++)if((u=ua(o,a))<48||r<u)return NaN;return parseInt(o,n)}return+c};if(At("Number",!ra(" 0o1")||!ra("0b1")||ra("+0x1"))){for(var sa,fa=function(e){var e=arguments.length<1?0:ra(function(e){e=Le(e,"number");return"bigint"==typeof e?e:ca(e)}(e)),t=this;return te(oa,t)&&c(function(){Ki(t)})?jr(Object(e),t,fa):e},la=d?E(ra):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),da=0;la.length>da;da++)b(ra,sa=la[da])&&!b(fa,sa)&&ta(fa,sa,ea(ra,sa));(fa.prototype=oa).constructor=fa,at(v,"Number",fa,{constructor:!0})}var pa,ha=Xe.PROPER,ga=y.trim,u=(g({target:"String",proto:!0,forced:(pa="trim",c(function(){return!!zi[pa]()||"​᠎"!=="​᠎"[pa]()||ha&&zi[pa].name!==pa}))},{trim:function(){return ga(this)}}),S("slice")),ya=l("species"),va=Array,ma=Math.max;g({target:"Array",proto:!0,forced:!u},{slice:function(e,t){var n,r,o,i=Z(this),a=yt(i),u=pt(e,a),c=pt(t===undefined?a:t,a);if(_t(i)&&(n=i.constructor,(n=Jt(n)&&(n===va||_t(n.prototype))||f(n)&&null===(n=n[ya])?undefined:n)===va||n===undefined))return Eo(i,u,c);for(r=new(n===undefined?va:n)(ma(c-u,0)),o=0;u<c;u++,o++)u in i&&Yn(r,o,i[u]);return r.length=o,r}});Ra.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},Ra.prototype.on=function(e,t,n){var r;if(void 0===n&&(n=0),this)return(r=this.eventsList[e])||(this.eventsList[e]=[],r=this.eventsList[e]),-1===this.indexOf(r,t)&&r.push({name:e,type:n||0,callback:t}),this},Ra.prototype.one=function(e,t){this.on(e,t,1)},Ra.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(U){}}return null}},Ra.prototype.clear=function(){this.eventsList={}};var ba,wa=Ra,Ea=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach(function(t){n[t]=e.map(function(e){return e[t]})}),n.count=e.length,Na(n)},Oa=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}};function Ra(){var a=this;this.emit=function(e,t){if(a){var n;if(null!=(r=a.eventsList[e])&&r.length)for(var r=r.slice(),o=0;o<r.length;o++){n=r[o];try{var i=n.callback.apply(a,[t]);if(1===n.type&&a.remove(e,n.callback),!1===i)break}catch(d){throw d}}return a}},this.eventsList={}}(w=ba=ba||{})[w.number=-1]="number",w.string="";var I,L,xa,Sa=function(e,t){return"number"==typeof e||"string"==typeof e?e:t?ba.string:ba.number},Ta=function(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e},Pa=function(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)},Ia=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],La=function(t){return Ia.some(function(e){return-1!==t.indexOf(e)})},Ca=["ret","retcode","code","errcode"],Aa=function(e,t,n){var r,o;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(i=(o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx)||{}).code)?"unknown":i,isErr:o.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(r=null==t?void 0:t.ret)?void 0:r.join)&&(Ca=[].concat(t.ret.map(function(e){return e.toLowerCase()})));var i,a=Object.getOwnPropertyNames(e).filter(function(e){return-1!==Ca.indexOf(e.toLowerCase())});return a.length?{code:""+(i=Number(e[a[0]])),isErr:0!==i}:{code:"unknown",isErr:!1}}catch(d){return{code:"unknown",isErr:!1}}},ja=function(){var n=new WeakSet;return function(e,t){if(t instanceof Error)return"Error.message: "+t.message+" \n  Error.stack: "+t.stack;if("object"===vo(t)&&null!==t){if(n.has(t))return"[Circular "+(e||"root")+"]";n.add(t)}return t}},ka=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,ja(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,ja(),4)||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},Na=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,ja())||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},_a=function cs(i,a){void 0===a&&(a=3);var o,u,c,s="";return Array.isArray(i)?(s+="[",o=i.length,i.forEach(function(e,t){var n,r;"object"===vo(e)&&1<a?s+=cs(e,a-1):s+=(n=vo(e=e),r="",r+="undefined"===n||"symbol"===n||"function"===n?"null":"string"===n||"object"===n?'"'+e+'"':e),s+=t===o-1?"":","}),s+="]"):i instanceof Object?(s="{",u=Object.keys(i),c=u.length,u.forEach(function(e,t){var n,r,o;"object"===vo(i[e])&&1<a?s+='"'+e+'":'+cs(i[e],a-1):s+=(n=i[e=e],r=vo(n),o="","string"===r||"object"===r?o+='"'+e+'":"'+n+'"':"function"==typeof n?o+='"'+e+'":"function '+n.name+'"':"symbol"===vo(n)?o+='"'+e+'":"symbol"':"number"!=typeof n&&"boolean"!==r||(o+='"'+e+'": '+n),o),s+=t===c-1||t<c-1&&"undefined"==typeof i[u[t+1]]?"":","}),s+="}"):s+=i,s},Ua=(Fa.prototype.sourceURL=function(){return this.data.url},Fa.prototype.status=function(){return Number(this.data.status)},Fa.prototype.headers=function(){var n={};return this.data.headers.forEach(function(e,t){n[t]=e}),n},Fa);function Fa(e,t){this.type="fetch",this.data=e||{},this.data.response=t}(h=I=I||{}).INFO_ALL="-1",h.API_RESPONSE="1",h.INFO="2",h.ERROR="4",h.PROMISE_ERROR="8",h.AJAX_ERROR="16",h.SCRIPT_ERROR="32",h.IMAGE_ERROR="64",h.CSS_ERROR="128",h.CONSOLE_ERROR="256",h.MEDIA_ERROR="512",h.RET_ERROR="1024",h.REPORT="2048",h.PV="4096",h.EVENT="8192",h.PAGE_NOT_FOUND_ERROR="16384",h.WEBSOCKET_ERROR="32768",(a=L=L||{}).LOG="log",a.SPEED="speed",a.PERFORMANCE="performance",a.OFFLINE="offline",a.WHITE_LIST="whiteList",a.VITALS="vitals",a.PV="pv",a.CUSTOM_PV="customPV",a.EVENT="event",a.CUSTOM="custom",a.SDK_ERROR="sdkError",a.SET_DATA="setData",a.LOAD_PACKAGE="loadPackage",(E=xa=xa||{}).production="production",E.development="development",E.gray="gray",E.pre="pre",E.daily="daily",E.local="local",E.test="test",E.others="others";var Ma=TypeError,y=function(s){return function(e,t,n,r){fe(t);var o=ve(e),i=z(o),a=yt(o),u=s?a-1:0,c=s?-1:1;if(n<2)for(;;){if(u in i){r=i[u],u+=c;break}if(u+=c,s?u<0:a<=u)throw Ma("Reduce of empty array with no initial value")}for(;s?0<=u:u<a;u+=c)u in i&&(r=t(r,i[u],u,o));return r}},S={left:y(!1),right:y(!0)},Da="process"==$(v.process),Ha=S.left,u=T("reduce"),qa=(g({target:"Array",proto:!0,forced:!u||!Da&&79<ne&&ne<83},{reduce:function(e){var t=arguments.length;return Ha(this,e,t,1<t?arguments[1]:undefined)}}),TypeError),Ba=function(e,t){if(e<t)throw qa("Not enough arguments");return e},Wa=/MSIE .\./.test(e),Xa=v.Function,w=function(i){return Wa?function(e,t){var n=2<Ba(arguments.length,1),r=O(e)?e:Xa(e),o=n?Eo(arguments,2):undefined;return i(n?function(){wo(r,this,o)}:r,t)}:i},h={setTimeout:w(v.setTimeout),setInterval:w(v.setInterval)},a=h.setInterval,E=(g({global:!0,bind:!0,forced:v.setInterval!==a},{setInterval:a}),h.setTimeout),Ga=(g({global:!0,bind:!0,forced:v.setTimeout!==E},{setTimeout:E}),function(e){return e.filter(function(n,r){return"static"!==n.type||!e.find(function(e,t){return n.url===e.url&&200===n.status&&r<t})})}),Va=function(n,r){var o,i=[],a=n.config;return n.lifeCycle.on("destroy",function(){i.length=0}),function(e,t){if(Array.isArray(e)?i=i.concat(e):i.push(e),r&&i.length>=r||n.sendNow&&0<i.length)return i=Ga(i),t(i.splice(0,i.length)),void(o&&clearTimeout(o));o&&clearTimeout(o),o=setTimeout(function(){o=null,0<(i=Ga(i)).length&&t(i.splice(0,i.length))},a.delay)}},$a=function(e,t){return Array.isArray(e)?t(e.map(function(e){return t=P(P({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(ka).join(" ")}),zo.forEach(function(e){t[e]||delete t[e]}),t;var t})):t([P(P({},e),{msg:"string"==typeof e.msg?e.msg:ka(e.msg)})])},Ja=function(e){e.level===I.INFO_ALL&&(e.level=I.INFO)},Ka=RangeError,y=function(e){var t=x(Q(this)),n="",r=ft(e);if(r<0||r==Infinity)throw Ka("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},za=(g({target:"String",proto:!0},{repeat:y}),function(e){return(Array.isArray(e)?e:[e]).map(function(n){return Object.getOwnPropertyNames(n).reduce(function(e,t){return"ctx"!==t&&(e[t]=n[t]),e},{level:I.INFO,msg:""})})}),Ya=function(r){return function(e){return r.sendPipeline([function(e,n){return n({url:r.config.url||"",data:Ea(za(e)),method:"post",contentType:"application/json",type:L.LOG,log:e,requestConfig:{timeout:5e3},success:function(){var t=r.config.onReport;"function"==typeof t&&e.forEach(function(e){t(e)}),"function"==typeof n&&n([])},fail:function(e){"403 forbidden"===e&&r.destroy()}})}],L.LOG)(e)}},Qa=function(o){return function(e,t){o.lifeCycle.emit("modifyRequest",e);var n=o.config.modifyRequest;if("function"==typeof n)try{var r=n(e);"object"===vo(r)&&"url"in r&&(e=r)}catch(_){console.error(_)}t(e)}},Za=function(r){return function(e,t){r.lifeCycle.emit("afterRequest",e);var n=r.config.afterRequest;"function"==typeof n&&!1===n(e)||t(e)}},eu=function(){},tu=function(n){if(n&&n.reduce&&n.length)return 1===n.length?function(e,t){n[0](e,t||eu)}:n.reduce(function(n,r){return function(e,t){return void 0===t&&(t=eu),n(e,function(e){return null==r?void 0:r(e,t)})}});throw new TypeError("createPipeline need at least one function param")},nu=function(t,n){Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof t[e]&&"constructor"!==e&&(n?n[e]="sendPipeline"===e?function(){return function(){}}:function(){}:t[e]=function(){})})},S=(Object.defineProperty(C.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.36.2"},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),I},enumerable:!1,configurable:!0}),C.prototype.init=function(e){this.setConfig(e);for(var t=0;t<C.installedPlugins.length;t++)try{C.installedPlugins[t].patch(this)}catch(i){this.sendSDKError(i)}this.lifeCycle.emit("onInited")},C.prototype.setConfig=function(e){Object.assign(this.config,e);var e=this.config,t=e.id,n=e.uin,r=e.version,o=e.ext1,i=e.ext2,a=e.ext3,u=e.aid,c=e.env,s=void 0===c?"production":c,c=e.pageUrl,e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==u;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.36.2",this.bean.aid=u||"",this.bean.env=function(){switch(s){case xa.production:case xa.development:case xa.gray:case xa.pre:case xa.daily:case xa.local:case xa.test:case xa.others:return 1;default:return}}()?s:xa.others,c&&this.extendBean("from",encodeURIComponent(c)),o&&this.extendBean("ext1",encodeURIComponent(o)),i&&this.extendBean("ext2",encodeURIComponent(i)),a&&this.extendBean("ext3",encodeURIComponent(a)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},C.use=function(e){-1===C.installedPlugins.indexOf(e)&&e.aegisPlugin&&C.installedPlugins.push(e)},C.unuse=function(e){e=C.installedPlugins.indexOf(e);-1!==e&&C.installedPlugins.splice(e,1)},C.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:I.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,P({},e[0]),{level:I.INFO}),this.normalLogPipeline(n)},C.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:I.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,P({},e[0]),{level:I.INFO_ALL}),this.normalLogPipeline(n)},C.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:I.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,P({},e[0])),this.normalLogPipeline(n)},C.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:I.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,P({},e[0]),{level:I.ERROR}),this.normalLogPipeline(n)},C.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},C.prototype.reportPv=function(n){var r,o=this;n&&(console.warn("reportPv is deprecated, please use reportEvent"),r=""+Object.getOwnPropertyNames(this.bean).filter(function(e){return"id"!==e}).map(function(e){return e+"="+o.bean[e]}).join("&"),this.sendPipeline([function(e,t){t({url:o.config.url+"/"+n+"?"+r,addBean:!1,type:L.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],L.CUSTOM_PV)(null))},C.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},C.prototype.reportTime=function(e,t){if("object"===vo(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},C.prototype.reportT=function(e){var t=e.name,n=e.duration,r=e.ext1,r=void 0===r?"":r,o=e.ext2,o=void 0===o?"":o,i=e.ext3,i=void 0===i?"":i,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof r&&"string"==typeof o&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,r,o,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},C.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},C.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},C.prototype.submitCustomTime=function(e,t,n,r,o,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:o||this.config.ext3,from:i||undefined})},C.prototype.extendBean=function(e,t){this.bean[e]=t},C.prototype.sendPipeline=function(e,t){var n,i,a,u=this;return tu(Ko([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},(a=t,function(e,t){var n=Array.isArray(e),r=n?e:[e],o=(i.lifeCycle.emit("beforeRequest",e),i.config.beforeRequest);(r="function"==typeof o?r.map(function(e){try{var t=o({logs:e,logType:a});return(null==t?void 0:t.logType)===a&&null!=t&&t.logs?t.logs:!1!==t&&e}catch(_){return e}}).filter(function(e){return!1!==e}):r).length&&(r=function(e,t){if(!Array.isArray(e)||e.length<=1)return e;var n=[],r=[];return!(r="string"==typeof t?[t]:t)||r.length<=0||(r.forEach(function(t){e.forEach(function(e){null!=e&&e[t]&&n.push(t)})}),0<n.length&&(e=e.map(function(e){var t={};return n.forEach(function(e){t[e]=""}),P(P({},t),e)}))),e}(r,zo),t(n?r:r[0]))})],e,[Qa(i=n=this),function(r,o){u.request(r,function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u.failRequestCount=0,o({isErr:!1,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.success)&&e.call.apply(e,Ko([r],t))},function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];10<=++u.failRequestCount&&u.destroy(),o({isErr:!0,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.fail)&&e.call.apply(e,Ko([r],t))})},Za(this)]))},C.prototype.send=function(e,o,i){var t=this;return tu([Qa(this),function(n,r){t.request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!1,result:e,logType:n.type,logs:n.log}),null!=o&&o.apply(void 0,e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!0,result:e,logType:n.type,logs:n.log}),null!=i&&i.apply(void 0,e)})},Za(this)])(e)},C.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},C.prototype.sendSDKError=function(e){var n=this;this.sendPipeline([function(e,t){t({url:n.config.url+"?id=1085&msg[0]="+encodeURIComponent(ka(e))+"&level[0]=2&from="+n.config.id+"&count=1&version="+n.config.id+"(1.36.2)",addBean:!1,method:"get",type:L.SDK_ERROR,log:e})}],L.SDK_ERROR)(e)},C.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=C.instances.indexOf(this);-1!==r&&C.instances.splice(r,1);for(var o=C.installedPlugins.length-1;0<=o;o--)try{C.installedPlugins[o].unpatch(this)}catch(D){this.sendSDKError(D)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(e){n[e].writable&&(t[e]=null)}),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&nu(i,this),i=Object.getPrototypeOf(i););0===C.instances.length&&(r=Object.getPrototypeOf(this).constructor,nu(r),nu(C))}},C.version="1.36.2",C.instances=[],C.logType=I,C.environment=xa,C.installedPlugins=[],C),ru=Function,ou=s([].concat),iu=s([].join),au={},T=M?ru.bind:function(a){var u=fe(this),e=u.prototype,c=Eo(arguments,1),s=function(){var e=ou(c,Eo(arguments));if(this instanceof s){var t=u,n=e.length,r=e;if(!b(au,n)){for(var o=[],i=0;i<n;i++)o[i]="a["+i+"]";au[n]=ru("C,a","return new C("+iu(o,",")+")")}return au[n](t,r)}return u.apply(a,e)};return f(e)&&(s.prototype=e),s};function C(e){var n,t,r,o,a,i,u,c,s,f,l,d,p,h,g,y=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,hostUrl:"https://aegis.qq.com",websocketHack:!1,env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:""},this.isWhiteList=!1,this.lifeCycle=new wa,this.bean={},this.normalLogPipeline=tu([Va(this,5),$a,function(e,t){var r=n.config;t(e=e.map(function(e){var t,n=r.maxLength||204800;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(U){e.msg=ka(e.msg).substring(0,r.maxLength)}return e}))},(h=(n=this).config,g={},function(e,t){var n="number"==typeof h.repeat?h.repeat:5;if(0===n)return t(e);t(e.filter(function(e){return e.level!==I.ERROR&&e.level!==I.PROMISE_ERROR&&e.level!==I.AJAX_ERROR&&e.level!==I.SCRIPT_ERROR&&e.level!==I.IMAGE_ERROR&&e.level!==I.CSS_ERROR&&e.level!==I.MEDIA_ERROR||(g[e.msg]=g[e.msg]||0,g[e.msg]+=1,!(g[e.msg]>n))}))}),(d=this.lifeCycle.emit,p=this.config,function(e,t){var n,r=p.logCreated;return"function"==typeof r?(n=e.filter(function(e){return!1!==r(e)}),d("beforeWrite",n),t(n)):(d("beforeWrite",e),t(e))}),(l=this,setTimeout(function(){var e=l.config.pvUrl,n=void 0===e?"":e;n&&l.sendPipeline([function(e,t){t({url:n,type:L.PV,fail:function(e){"403 forbidden"===e&&l.destroy()}})}],L.PV)(null)},100),function(e,t){t(e)}),(s=c=u=!1,f=[],(a=this).lifeCycle.on("onConfigChange",function(){i&&clearTimeout(i),i=setTimeout(function(){var e,n;!s&&a.config&&(s=!0,e=a.config.whiteListUrl,(n=void 0===e?"":e)&&a.sendPipeline([function(e,t){t({url:n,type:L.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,r=t.result,o=void 0===r?{}:r;if(0===n){if(u=o.is_in_white_list,a.isWhiteList=u,o.shutdown)return void a.destroy();0<=o.rate&&o.rate<=1&&(a.config.random=o.rate,a.isGetSample=!1)}a.isWhiteList&&f.length?Ya(a)(f.splice(0),function(){}):!a.isWhiteList&&f.length&&(f.length=0);var i=a.config.onWhitelist;"function"==typeof i&&i(u)}catch(m){}},fail:function(e){"403 forbidden"===e&&a.destroy(),c=!0}})}],L.WHITE_LIST)(null),s=!1)},a.config.uin?50:500)}),a.lifeCycle.on("destroy",function(){f.length=0}),function(e,t){var n;u||null!=(n=null==(n=a.config)?void 0:n.api)&&n.reportRequest?t(e.concat(f.splice(0)).map(function(e){return Ja(e),e})):(n=e.filter(function(e){return e.level!==I.INFO&&e.level!==I.API_RESPONSE?(Ja(e),!0):(c||(f.push(e),200<=f.length&&(f.length=200)),!1)})).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),r=(y.lifeCycle.emit("beforeReport",n),y.config.beforeReport);(e="function"==typeof r?e.filter(function(e){return!1!==r(e)}):e).length&&t(e)}catch(v){}},Ya(this)]),this.eventPipeline=tu([Va(this,5),(o=this,function(e){o.sendPipeline([function(e,t){var n=e.map(function(e){return{name:e.name,ext1:e.ext1||o.config.ext1||"",ext2:e.ext2||o.config.ext2||"",ext3:e.ext3||o.config.ext3||""}});t({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:L.EVENT,log:e,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],L.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=tu([Va(this,5),(r=this,function(e){return r.sendPipeline([function(e,t){t({url:r.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:L.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&r.destroy()}})}],L.CUSTOM)(e)})]),this.config=(t=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),t.url=t.url||e+"/collect",t.offlineUrl=t.offlineUrl||e+"/offline",t.whiteListUrl=t.whiteListUrl||e+"/collect/whitelist",t.pvUrl=t.pvUrl||e+"/collect/pv",t.eventUrl=t.eventUrl||e+"/collect/events",t.speedUrl=t.speedUrl||e+"/speed",t.customTimeUrl=t.customTimeUrl||e+"/speed/custom",t.performanceUrl=t.performanceUrl||e+"/speed/performance",t.webVitalsUrl=t.webVitalsUrl||e+"/speed/webvitals",t.setDataReportUrl=t.SetDataReportUrl||e+"/speed/miniProgramData",t),C.instances.push(this)}g({target:"Function",proto:!0,forced:Function.bind!==T},{bind:T});vu.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},vu.prototype.unpatch=function(e){e=this.instances.indexOf(e);-1!==e&&(this.instances.splice(e,1),0===this.instances.length&&this.uninstall())},vu.prototype.countInstance=function(){return this.instances.length},vu.prototype.uninstall=function(){var e;null!=(e=null==(e=this.option)?void 0:e.destroy)&&e.apply(this)},vu.prototype.walk=function(n){var r=this;this.instances.forEach(function(e){var t=r.canUse(e);t&&n(e,t)})},vu.prototype.canUse=function(e){e=this.getConfig(e);return!(!e||"object"!==vo(e))||!!e},vu.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},vu.prototype.exist=function(e){return-1===this.instances.indexOf(e)},vu.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null!=(t=null==(t=this.option)?void 0:t.init)&&t.call(this.option,this.getConfig(e)))},vu.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))};var A=vu,u=new A({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(o){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),uu=RangeError,cu=String,su=Math.floor,fu=s(y),lu=s("".slice),du=s(1..toFixed),pu=function(e,t,n){return 0===t?n:t%2==1?pu(e,t-1,n*e):pu(e*e,t/2,n)},hu=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=su(o/1e7)},gu=function(e,t){for(var n=6,r=0;0<=--n;)r+=e[n],e[n]=su(r/t),r=r%t*1e7},yu=function(e){for(var t,n=6,r="";0<=--n;)""===r&&0!==n&&0===e[n]||(t=cu(e[n]),r=""===r?t:r+fu("0",7-t.length)+t);return r},w=c(function(){return"0.000"!==du(8e-5,3)||"1"!==du(.9,0)||"1.25"!==du(1.255,2)||"1000000000000000128"!==du(0xde0b6b3a7640080,0)})||!c(function(){du({})});function vu(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}g({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,n,r,o=Ki(this),e=ft(e),i=[0,0,0,0,0,0],a="",u="0";if(e<0||20<e)throw uu("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return cu(o);if(o<0&&(a="-",o=-o),1e-21<o)if(r=(t=function(){for(var e=0,t=o*pu(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?o*pu(2,-t,1):o/pu(2,t,1),r*=4503599627370496,0<(t=52-t)){for(hu(i,0,r),n=e;7<=n;)hu(i,1e7,0),n-=7;for(hu(i,pu(10,n,1),0),n=t-1;23<=n;)gu(i,1<<23),n-=23;gu(i,1<<n),hu(i,1,1),gu(i,2),u=yu(i)}else hu(i,0,r),hu(i,1<<-t,0),u=yu(i)+fu("0",e);return 0<e?a+((r=u.length)<=e?"0."+fu("0",e-r)+u:lu(u,0,r-e)+"."+lu(u,r-e)):a+u}});var mu=["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"],bu=function(t){var n;return t.payload?(n={},Object.keys(t).forEach(function(e){"payload"!==e&&(n[e]=t[e])}),n):t},wu=function(){return"undefined"!=typeof window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now},Eu=function(t){return mu.some(function(e){return-1<t.indexOf(e)})},Ou=new A({name:"reportAssetSpeed"}),a=Ou=new A({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;wu()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},publishMany:function(e,t){for(var n=t.config,r=0,o=e.length;r<o;r++){var i=e[r];-1===this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)||Eu(i.name)||this.publish(this.generateLog(i,n))}},collectSuccessLog:function(n){var e,t,r=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),n),(e=new window.PerformanceObserver(function(e){r.publishMany(e.getEntries(),n)})).observe({entryTypes:[this.collectEntryType]}),n.lifeCycle.on("destroy",function(){0===Ou.countInstance()&&e.disconnect()})):(t=setInterval(function(){var e=performance.getEntriesByType(r.collectEntryType),t=e.slice(r.collectCur);r.collectCur=e.length,r.publishMany(t,n)},3e3),n.lifeCycle.on("destroy",function(){0===Ou.countInstance()&&clearInterval(t)}))},collectFailLog:function(e){var r=this,o=e.config,t=function(e){var t,n;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(null==(e=o.api)?void 0:e.resourceTypeHandler)?null==(e=o.api)?void 0:e.resourceTypeHandler(t):"",n=performance.getEntriesByType(r.collectEntryType).find(function(e){return e.name===t}),Eu(t)||(n={url:Ta(t),status:400,duration:Number(((null==n?void 0:n.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:Pa(t),urlQuery:Ta(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},r.publish(n))))};window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){0===Ou.countInstance()&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,t){var n,t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"";return{url:Ta(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:Pa(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:Ta(e.name,!0),domainLookup:Sa(e.domainLookupEnd-e.domainLookupStart),connectTime:Sa(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;wu()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0)))},destroy:function(){this.option.publish=function(){}}}),Ru=p.findIndex,xu=!0;"findIndex"in[]&&Array(1).findIndex(function(){xu=!1}),g({target:"Array",proto:!0,forced:xu},{findIndex:function(e){return Ru(this,e,1<arguments.length?arguments[1]:undefined)}}),n("findIndex");var Su,Tu,h=l("species"),E=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),T=v.setImmediate,y=v.clearImmediate,Pu=v.process,Iu=v.Dispatch,Lu=v.Function,w=v.MessageChannel,Cu=v.String,Au=0,ju={};try{Su=v.location}catch(_){}var ku=function(e){var t;b(ju,e)&&(t=ju[e],delete ju[e],t())},Nu=function(e){return function(){ku(e)}},p=function(e){ku(e.data)},n=function(e){v.postMessage(Cu(e),Su.protocol+"//"+Su.host)};T&&y||(T=function(e){Ba(arguments.length,1);var t=O(e)?e:Lu(e),n=Eo(arguments,1);return ju[++Au]=function(){wo(t,undefined,n)},Tu(Au),Au},y=function(e){delete ju[e]},Da?Tu=function(e){Pu.nextTick(Nu(e))}:Iu&&Iu.now?Tu=function(e){Iu.now(Nu(e))}:w&&!E?(Bu=(w=new w).port2,w.port1.onmessage=p,Tu=Nt(Bu.postMessage,Bu)):v.addEventListener&&O(v.postMessage)&&!v.importScripts&&Su&&"file:"!==Su.protocol&&!c(n)?(Tu=n,v.addEventListener("message",p,!1)):Tu="onreadystatechange"in ke("script")?function(e){tn.appendChild(ke("script")).onreadystatechange=function(){tn.removeChild(this),ku(e)}}:function(e){setTimeout(Nu(e),0)});var _u,Uu,Fu,Mu,Du,Hu,qu,w={set:T,clear:y},Bu=/ipad|iphone|ipod/i.test(e)&&v.Pebble!==undefined,n=/web0s(?!.*chrome)/i.test(e),p=Ue.f,Wu=w.set,T=v.MutationObserver||v.WebKitMutationObserver,y=v.document,Xu=v.process,e=v.Promise,p=p(v,"queueMicrotask"),p=p&&p.value,Gu=(p||(_u=function(){var e,t;for(Da&&(e=Xu.domain)&&e.exit();Uu;){t=Uu.fn,Uu=Uu.next;try{t()}catch(_){throw Uu?Mu():Fu=undefined,_}}Fu=undefined,e&&e.enter()},Mu=E||Da||n||!T||!y?!Bu&&e&&e.resolve?((E=e.resolve(undefined)).constructor=e,qu=Nt(E.then,E),function(){qu(_u)}):Da?function(){Xu.nextTick(_u)}:(Wu=Nt(Wu,v),function(){Wu(_u)}):(Du=!0,Hu=y.createTextNode(""),new T(_u).observe(Hu,{characterData:!0}),function(){Hu.data=Du=!Du})),p||function(e){e={fn:e,next:undefined};Fu&&(Fu.next=e),Uu||(Uu=e,Mu()),Fu=e}),Vu=function(e){try{return{error:!1,value:e()}}catch(_){return{error:!0,value:_}}},n=function(){this.head=null,this.tail=null},$u=(n.prototype={add:function(e){e={item:e,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},n),Ju=v.Promise,Ku="object"==typeof window&&"object"!=typeof Deno;Ju&&Ju.prototype;var zu,Yu,Qu,Zu=l("species"),ec=!1,tc=O(v.PromiseRejectionEvent),Bu={CONSTRUCTOR:At("Promise",function(){var e=et(Ju),t=e!==String(Ju);if(!t&&66===ne)return!0;if(51<=ne&&/native code/.test(e))return!1;var e=new Ju(function(e){e(1)}),n=function(e){e(function(){},function(){})};return(e.constructor={})[Zu]=n,!(ec=e.then(function(){})instanceof n)||!t&&Ku&&!tc}),REJECTION_EVENT:tc,SUBCLASSING:ec},nc=function(e){var n,r;this.promise=new e(function(e,t){if(n!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=fe(n),this.reject=fe(r)},rc={f:function(e){return new nc(e)}},oc=w.set,e=Bu.CONSTRUCTOR,ic=Bu.REJECTION_EVENT,E=Bu.SUBCLASSING,ac=ot.getterFor("Promise"),uc=ot.set,y=Ju&&Ju.prototype,cc=Ju,sc=y,fc=v.TypeError,lc=v.document,dc=v.process,pc=rc.f,hc=pc,gc=!!(lc&&lc.createEvent&&v.dispatchEvent),yc=function(e){var t;return!(!f(e)||!O(t=e.then))&&t},vc=function(e,t){var n,r,o,i,a=t.value,u=1==t.state,c=u?e.ok:e.fail,s=e.resolve,f=e.reject,l=e.domain;try{c?(u||(2===t.rejection&&(i=t,m(oc,v,function(){var e=i.facade;Da?dc.emit("rejectionHandled",e):bc("rejectionhandled",e,i.value)})),t.rejection=1),!0===c?n=a:(l&&l.enter(),n=c(a),l&&(l.exit(),o=!0)),n===e.promise?f(fc("Promise-chain cycle")):(r=yc(n))?m(r,n,s,f):s(n)):f(a)}catch(_){l&&!o&&l.exit(),f(_)}},mc=function(n,o){n.notified||(n.notified=!0,Gu(function(){for(var e,r,t=n.reactions;e=t.get();)vc(e,n);n.notified=!1,o&&!n.rejection&&(r=n,m(oc,v,function(){var e,t=r.facade,n=r.value;if(wc(r)&&(e=Vu(function(){Da?dc.emit("unhandledRejection",n,t):bc("unhandledrejection",t,n)}),r.rejection=Da||wc(r)?2:1,e.error))throw e.value}))}))},bc=function(e,t,n){var r;gc?((r=lc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),v.dispatchEvent(r)):r={promise:t,reason:n},!ic&&(t=v["on"+e])?t(r):"unhandledrejection"===e&&function(e,t){var n=v.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},wc=function(e){return 1!==e.rejection&&!e.parent},Ec=function(t,n,r){return function(e){t(n,e,r)}},Oc=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,mc(e,!0))},Rc=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw fc("Promise can't be resolved itself");var r=yc(n);r?Gu(function(){var e={done:!1};try{m(r,n,Ec(Rc,e,t),Ec(Oc,e,t))}catch(_){Oc(e,_,t)}}):(t.value=n,t.state=1,mc(t,!1))}catch(_){Oc({done:!1},_,t)}}};if(e&&(sc=(cc=function(e){br(this,sc),fe(e),m(zu,this);var t=ac(this);try{e(Ec(Rc,t),Ec(Oc,t))}catch(_){Oc(t,_)}}).prototype,(zu=function(e){uc(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new $u,rejection:!1,state:0,value:undefined})}).prototype=at(sc,"then",function(e,t){var n=ac(this),r=pc(_i(this,cc));return n.parent=!0,r.ok=!O(e)||e,r.fail=O(t)&&t,r.domain=Da?dc.domain:undefined,0==n.state?n.reactions.add(r):Gu(function(){vc(r,n)}),r.promise}),Yu=function(){var e=new zu,t=ac(e);this.promise=e,this.resolve=Ec(Rc,t),this.reject=Ec(Oc,t)},rc.f=pc=function(e){return e===cc||void 0===e?new Yu:hc(e)},O(Ju)&&y!==Object.prototype)){Qu=y.then,E||at(y,"then",function(e,t){var n=this;return new cc(function(e,t){m(Qu,n,e,t)}).then(e,t)},{unsafe:!0});try{delete y.constructor}catch(_){}_n&&_n(y,sc)}g({global:!0,constructor:!0,wrap:!0,forced:e},{Promise:cc}),Cn(cc,"Promise",!1),T=ee("Promise"),p=Be.f,d&&T&&!T[h]&&p(T,h,{configurable:!0,get:function(){return this}});n=Bu.CONSTRUCTOR||!r(function(e){Ju.all(e).then(undefined,function(){})}),g({target:"Promise",stat:!0,forced:n},{all:function(e){var u=this,t=rc.f(u),c=t.resolve,s=t.reject,n=Vu(function(){var r=fe(u.resolve),o=[],i=0,a=1;vr(e,function(e){var t=i++,n=!1;a++,m(r,u,e).then(function(e){n||(n=!0,o[t]=e,--a||c(o))},s)}),--a||c(o)});return n.error&&s(n.value),t.promise}}),w=Bu.CONSTRUCTOR,E=Ju&&Ju.prototype,g({target:"Promise",proto:!0,forced:w,real:!0},{"catch":function(e){return this.then(undefined,e)}}),O(Ju)&&(y=ee("Promise").prototype["catch"],E["catch"]!==y&&at(E,"catch",y,{unsafe:!0})),g({target:"Promise",stat:!0,forced:n},{race:function(e){var n=this,r=rc.f(n),o=r.reject,t=Vu(function(){var t=fe(n.resolve);vr(e,function(e){m(t,n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}}),g({target:"Promise",stat:!0,forced:Bu.CONSTRUCTOR},{reject:function(e){var t=rc.f(this);return m(t.reject,undefined,e),t.promise}}),e=Bu.CONSTRUCTOR;ee("Promise"),g({target:"Promise",stat:!0,forced:e},{resolve:function(e){var t=this;return R(t),f(e)&&e.constructor===t?e:((0,(t=rc.f(t)).resolve)(e),t.promise)}});var xc,Sc,Tc=!1,Pc=[],Ic=function(t){var n,r,o;Pc.find(function(e){return e.name===t.name})||(Pc.push(t),Tc||!window.XMLHttpRequest)||(Tc=!0,n=window.XMLHttpRequest.prototype.send,r=window.XMLHttpRequest.prototype.open,o=window.XMLHttpRequest.prototype.setRequestHeader,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),!this.sendByAegis)for(var e=0;e<Pc.length;e++){var t=Pc[e];try{"function"==typeof t.open&&t.open(this)}catch(o){}}return r.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,o.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<Pc.length;e++){var t=Pc[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(o){}}return n.apply(this,arguments)})},Lc=function(t){var e=Pc.findIndex(function(e){return e.name===t.name});-1!==e&&Pc.splice(e,1)},Cc=!1,Ac=[],jc=function(e){return e.split("\r\n").reduce(function(e,t){t=t.split(": ");return t[0]&&t[1]&&(e[t[0]]=t[1]),e},{})},kc=function(r,e,o){return null!=e&&e.length&&"object"===vo(r)?e.reduce(function(e,t){var n=r instanceof Headers?r.get(t):r[t];return n?e+(""===e?"\n":"\n\n")+o+" header "+t+": "+n:e},""):""},Nc={sw8:function(e){e=e.split("-")[1];return e?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},_c=function(e){var t,n="";return"object"===vo(e)&&(t=(e=function(e){for(var t=0,n=Object.keys(Nc);t<n.length;t++){var r=n[t],o=e[r]||"function"==typeof e.get&&e.get(r);if(o)return[r,o]}return["",""]}(e))[0],e=e[1],t&&(n=Nc[t](e))),n},T=(new A({name:"reportApiSpeed"}),new A({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},overrideFetch:function(p){var a,h=this,e={name:this.name,then:function(c,s,f,l){var d,e,t;p.hostUrl&&-1<f.indexOf(p.hostUrl)||(d={url:c.url,isHttps:Pa(c.url),method:(null==l?void 0:l.method)||"get",duration:s,type:"fetch",nextHopProtocol:"",status:c.status||0},"fetch"!==(t="function"==typeof(null==(e=p.api)?void 0:e.resourceTypeHandler)?null==(e=p.api)?void 0:e.resourceTypeHandler(c.url):t)&&"static"!==t&&(e=c.headers?c.headers.get("content-type"):"",t=c.ok&&"string"==typeof e&&La(e)?"static":"fetch"),"fetch"===t?c.clone().text().then(function(e){var t=null==(t=p.api)?void 0:t.apiDetail,n=c.status<=0||400<=c.status,r=(null==(r=p.api)?void 0:r.reqHeaders)||[],r=kc(null==l?void 0:l.headers,r,"req"),o=(null==(o=p.api)?void 0:o.resHeaders)||[],o=kc(c.headers,o,"res"),i=_c(null==l?void 0:l.headers),a=Aa(e,p.api,{url:f,ctx:c}),u=a.code,a=a.isErr,t=(n?"FETCH_ERROR: "+e+" \n\n":"")+"fetch req url: "+f+" \n                                \nreq method: "+((null==l?void 0:l.method)||"get")+" \n                                \nreq param: "+(t?_a(null==l?void 0:l.body):"")+" \n                                \nres duration: "+s+"ms \n                                \nres status: "+(c.status||0)+" \n                                \nres retcode: "+u+"\n                                \nres data: "+(t?e:"")+"\n                                "+r+"\n                                "+o;d.payload=new Ua(c,e),d.ret=u,d.isErr=+a,h.publishNormalLog({msg:t,level:n?I.AJAX_ERROR:a?I.RET_ERROR:I.API_RESPONSE,code:u,trace:i})}):Object.assign(d,{type:"static",urlQuery:Ta(c.url,!0),domainLookup:ba.number,connectTime:ba.number}),h.publishSpeed(d))},"catch":function(e,t,n,r){var o,i,a;if(!(p.hostUrl&&-1<n.indexOf(p.hostUrl)))throw o={url:n,isHttps:Pa(n),method:(null==r?void 0:r.method)||"get",duration:t,nextHopProtocol:"",type:"fetch",status:0},h.publishSpeed(o),o=null==(o=p.api)?void 0:o.apiDetail,i=(null==(i=p.api)?void 0:i.reqHeaders)||[],i=kc(null==r?void 0:r.headers,i,"req"),a=_c(null==r?void 0:r.headers),t="AJAX_ERROR: "+e+"\n                          \nres status: 0\n                          \nres duration: "+t+"ms\n                          \nreq url: "+n+"\n                          \nreq method: "+((null==r?void 0:r.method)||"get")+"\n                          \nreq param: "+(o?_a(null==r?void 0:r.body):"")+"\n                          "+i,h.publishNormalLog({msg:t,level:I.AJAX_ERROR,code:-400,trace:a}),e}},t=(this.hackFetchOptions=e,this.hackFetchOptions);if(Ac.find(function(e){return e.name===t.name}))throw new Error("name '"+t.name+"' is already in hackFetch option list");Ac.push(t),!Cc&&window.fetch&&(Cc=!0,a=window.fetch,window.fetch=function(e,r){void 0===r&&(r={});for(var o="string"==typeof e?e:e.url,t=0;t<Ac.length;t++){var n=Ac[t];try{"function"==typeof n.beforeFetch&&n.beforeFetch(o,r)}catch(d){}}var i=Date.now();return a(e,r).then(function(e){for(var t=0;t<Ac.length;t++){var n=Ac[t];try{"function"==typeof n.then&&n.then(e,Date.now()-i,o,r)}catch(d){}}return e})["catch"](function(e){for(var t=0;t<Ac.length;t++){var n=Ac[t];try{"function"==typeof n["catch"]&&n["catch"](e,Date.now()-i,o,r)}catch(d){}}throw e})})},getRequestType:function(e,t,n){var r,e="function"==typeof(null==(r=e.api)?void 0:r.resourceTypeHandler)?null==(r=e.api)?void 0:r.resourceTypeHandler(n):"";return"fetch"!==e&&"static"!==e&&(n=t.getResponseHeader("content-type"),e=400<=t.status||"string"!=typeof n||!La(n)?"fetch":"static"),e},overrideXhr:function(g){var y=this,e={name:this.name,send:function(d,p){var h=Date.now();d.addEventListener("loadend",function(){var e,t=d.aegisUrl||"";if(t&&!(g.hostUrl&&-1<t.indexOf(g.hostUrl))){var n=Date.now()-h,r={url:t,isHttps:Pa(t),status:d.status||0,method:d.aegisMethod||"get",type:"fetch",nextHopProtocol:"",duration:n},o=(null==(o=g.api)?void 0:o.reqHeaders)||[],o=kc(d.aegisXhrReqHeader,o,"req"),i=(null==(i=g.api)?void 0:i.resHeaders)||[],a=jc(d.getAllResponseHeaders()),a=kc(a,i,"res"),i=_c(d.aegisXhrReqHeader);if("fetch"===y.getRequestType(g,d,t))try{var u=null==(e=g.api)?void 0:e.apiDetail,c=Aa(d.response,g.api,{url:t,ctx:d}),s=c.code,f=c.isErr,l="xhr req url: "+t+"\n                                \nreq method: "+r.method+"\n                                \nreq param: "+(u?_a(p):"")+"\n                                \nres duration: "+n+"ms\n                                \nres status: "+r.status+"\n                                \nres retcode: "+s+"\n                                \nres data: "+(u?_a(d.response):"")+"\n                                "+o+"\n                                "+a;r.ret=s,r.isErr=+f,y.publishNormalLog({msg:l,level:f?I.RET_ERROR:I.API_RESPONSE,code:s,trace:i})}catch($){r.ret="unknown"}else Object.assign(r,{type:"static",urlQuery:Ta(t,!0),domainLookup:ba.number,connectTime:ba.number});y.publishSpeed(r)}})}};this.hackXHROptions=e,Ic(this.hackXHROptions)},publishSpeed:function(n){var r=this;this.$walk(function(e){var t=r.$getConfig(e);"fetch"===n.type&&t&&"function"==typeof t.urlHandler?e.speedLogPipeline(P(P({},n),{url:Ta(t.urlHandler(n.url,n.payload))})):(n.url=Ta(n.url),e.speedLogPipeline(n))})},publishNormalLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){var t,e;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&Lc(this.option.hackXHROptions),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,-1!==(e=Ac.findIndex(function(e){return e.name===t.name}))&&Ac.splice(e,1))}}));B("match",function(r,u,c){return[function(e){var t=Q(this),n=e==undefined?undefined:le(e,r);return n?m(n,e,t):new RegExp(e)[r](x(t))},function(e){var t=R(this),n=x(e),e=c(u,t,n);if(e.done)return e.value;if(!t.global)return xi(t,n);for(var r=t.unicode,o=[],i=t.lastIndex=0;null!==(a=xi(t,n));){var a=x(a[0]);""===(o[i]=a)&&(t.lastIndex=yi(n,gt(t.lastIndex),r)),i++}return 0===i?null:o}]}),(h=xc=xc||{})[h.unknown=100]="unknown",h[h.wifi=1]="wifi",h[h.net2g=2]="net2g",h[h.net3g=3]="net3g",h[h.net4g=4]="net4g",h[h.net5g=5]="net5g",h[h.net6g=6]="net6g",(p=Sc=Sc||{})[p.android=1]="android",p[p.ios=2]="ios",p[p.windows=3]="windows",p[p.macos=4]="macos",p[p.linux=5]="linux",p[p.other=100]="other";var Uc,Fc,Mc,Dc,Hc,qc,Bc,Wc,Xc,Gc,Vc,$c,Jc,Kc,r=new A({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",xc.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var t={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},e=Object.keys(t).find(function(e){return t[e].test(navigator.userAgent)});return e?Sc[e]:Sc.other},refreshNetworkTypeToBean:function(t){var n=this,e=t.config;e&&("function"==typeof e.getNetworkType?e.getNetworkType:zc)(function(e){xc[e]||(e=xc.unknown),t.extendBean("netType",e),n.NetworkRefreshTimer=setTimeout(function(){n.refreshNetworkTypeToBean(t),clearTimeout(n.NetworkRefreshTimer)},1e4)})}}),zc=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?xc.net4g:0<=n.indexOf("wifi")?xc.wifi:0<=n.indexOf("5g")?xc.net5g:0<=n.indexOf("6g")?xc.net6g:0<=n.indexOf("3g")?xc.net3g:0<=n.indexOf("2g")?xc.net2g:xc.unknown))},Yc=window.WebSocket,Qc=[],Zc={construct:function(e,t){var a=new e(t[0],t[1]);return a.originSend=a.send,a.addEventListener("error",function(e){var e=(null==e?void 0:e.currentTarget)||{},t=e.url,n=e.readyState;null!=Qc&&Qc.forEach(function(e){e=e.onErr;null!=e&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})})}),Object.defineProperty(a,"send",{get:function(){return function(e){null!=(t=a.originSend)&&t.call(a,e);var e=a.readyState,t=WebSocket.OPEN,n=WebSocket.CLOSED,r=WebSocket.CONNECTING,o=WebSocket.CLOSING;if(e!==t){var i={readyState:e,connectUrl:a.url};switch(e){case n:Qc.forEach(function(e){e=e.sendErr;null!=e&&e(P({msg:"消息发送失败，连接已关闭！"},i))});break;case r:Qc.forEach(function(e){(0,e.sendErr)(P({msg:"消息发送失败，正在连接中！"},i))});break;case o:Qc.forEach(function(e){(0,e.sendErr)(P({msg:"消息发送失败，连接正在关闭！"},i))})}}}}}),a}},es=new A({name:"onError"}),w=es=new A({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(c){var e,t,n,r=this,o=window.onerror,i=(window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.publishErrorLog({msg:(ka(e[0])||"")+" @ ("+(ka(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+ka(e[4]||""),level:I.ERROR}),null!=o&&o.call.apply(o,Ko([window],e))},function(e){e=e&&ka(e.reason);r.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:I.PROMISE_ERROR})}),a=(window.addEventListener("unhandledrejection",i),function(e){e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement);if(e){var t=e.src||e.href,e=e.tagName;if("string"==typeof t&&e&&!(-1<window.location.href.indexOf(t))){var n={msg:e+" load fail: "+t,level:I.INFO};if(/\.js$/.test(t))n.level=I.SCRIPT_ERROR;else if(/\.css$/.test(t))n.level=I.CSS_ERROR;else switch(e.toLowerCase()){case"script":n.level=I.SCRIPT_ERROR;break;case"link":n.level=I.CSS_ERROR;break;case"img":n.level=I.IMAGE_ERROR;break;case"audio":case"video":n.level=I.MEDIA_ERROR;break;default:return}r.publishErrorLog(n)}}}),s=(window.document.addEventListener("error",a,!0),c.lifeCycle.on("destroy",function(){0===es.countInstance()&&(window.document.removeEventListener("unhandledrejection",i),window.document.removeEventListener("error",a,!0))}),this),u={name:this.name,send:function(a,u){a.addEventListener("loadend",function(){var e,t,n,r,o,i="";this.failType?i=this.failType:this.status?400<=this.status&&(i="error"):i="failed",c.config.hostUrl&&this.aegisUrl&&-1<this.aegisUrl.indexOf(c.config.hostUrl)||!i||(o=a.aegisUrl,e=null==(e=c.config.api)?void 0:e.apiDetail,t=(null==(t=c.config.api)?void 0:t.reqHeaders)||[],t=kc(a.aegisXhrReqHeader,t,"req"),r=(null==(r=c.config.api)?void 0:r.resHeaders)||[],n=jc(a.getAllResponseHeaders()),n=kc(n,r,"res"),r=_c(a.aegisXhrReqHeader),o=Aa(a.response,c.config.api,{url:o,ctx:a}).code,s.publishErrorLog({msg:"AJAX_ERROR: request "+i+"\n                      \nreq url: "+this.aegisUrl+"\n                      \nres status: "+(this.status||0)+"\n                      \nres retcode: "+o+"\n                      \nres duration: "+(Date.now()-a.aegisXhrStartTime)+"ms\n                      \nreq method: "+this.aegisMethod+"\n                      \nreq param: "+(e?_a(u):"")+"\n                      \nres data: "+(e?null===(o=(i=a).responseType&&"text"!==i.responseType?"":i.responseText)||void 0===o?void 0:o.slice(0,1e3):"")+"\n                      "+t+"\n                      "+n,level:I.AJAX_ERROR,trace:r}))}),a.addEventListener("timeout",function(){a.failType="timeout"}),a.addEventListener("error",function(){a.failType="error"}),a.addEventListener("abort",function(){a.failType="abort"})}};this.hackXHROptions=u,Ic(this.hackXHROptions),c.config.websocketHack&&(u={key:c.config.id+"-"+this.name,onErr:function(e){var t;null!=(t=r.publishWsErrorLog)&&t.call(r,e)},sendErr:function(e){var t;null!=(t=r.publishWsErrorLog)&&t.call(r,e)}},this.hackWebsocketConfig=u,u=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(e=window.WebSocket,window&&!e.isHack&&(t=new Proxy(WebSocket,Zc),e.isHack=!0,window.WebSocket=t),n=u,Qc.find(function(e){return e.key===n.key})||n&&Qc.push(n)))},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg,e=e.readyState;this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:I.WEBSOCKET_ERROR})},destroy:function(){var t,e;this.option.publishErrorLog=function(){},this.option.hackXHROptions&&Lc(this.option.hackXHROptions),this.option.hackWebsocketConfig&&(t=this.option.hackWebsocketConfig,window.WebSocket=Yc,-1!==(e=Qc.findIndex(function(e){return e.key===t.key}))&&Qc.splice(e,1))}}),ts=(new A({name:"pagePerformance"}),function(e,t,n,r){return void 0===n&&(n=15e3),void 0===r&&(r=0),(t=void 0===t?0:t)<=e&&e<=n?e:r}),E=new A({name:"pagePerformance",onNewAegis:function(n){var r=this;if(wu())if(Uc)this.publish(Uc,n);else try{this.getFirstScreenTiming(n,function(e){var t=performance.timing;t&&(Uc={dnsLookup:ts(t.domainLookupEnd-t.domainLookupStart),tcp:ts(t.connectEnd-t.connectStart),ssl:ts(0===t.secureConnectionStart?0:t.requestStart-t.secureConnectionStart),ttfb:ts(t.responseStart-t.requestStart),contentDownload:ts(t.responseEnd-t.responseStart),domParse:ts(t.domInteractive-t.domLoading),resourceDownload:ts(t.loadEventStart-t.domInteractive,0,15e3,1070),firstScreenTiming:ts(Math.floor(e),0,6e4)},r.publish(Uc,n))})}catch(o){}},publish:function(e,a){var u=this;a.sendPipeline([function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);var o,i=u.$getConfig(a);if(i)return o=-1===a.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof i.urlHandler?t({url:a.config.performanceUrl+o+r.join("&")+"&from="+(encodeURIComponent(i.urlHandler())||window.location.href),beanFilter:["from"],type:L.PERFORMANCE,log:e}):t({url:a.config.performanceUrl+o+r.join("&"),type:L.PERFORMANCE,log:e})}],L.PERFORMANCE)(e)},getFirstScreenTiming:function(e,t){null!=t&&t(0)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;return 0<=e.left&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}}),ns=(qc={passive:!0,capture:!0},Bc=new Date,y=function(){Hc=[],Mc=-1,Fc=null,Vc(addEventListener)},Wc=function(e,t){Fc||(Fc=t,Mc=e,Dc=new Date,Vc(removeEventListener),Xc())},Xc=function(){var t;0<=Mc&&Mc<Dc-Bc&&(t={entryType:"first-input",name:Fc.type,target:Fc.target,cancelable:Fc.cancelable,startTime:Fc.timeStamp,processingStart:Fc.timeStamp+Mc},Hc.forEach(function(e){e(t)}),Hc=[])},Gc=function(e){var t,n,r,o,i,a;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){Wc(n,r),a()},i=function(){a()},a=function(){removeEventListener("pointerup",o,qc),removeEventListener("pointercancel",i,qc)},addEventListener("pointerup",o,qc),addEventListener("pointercancel",i,qc)):Wc(t,e))},Vc=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,Gc,qc)})},$c="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",function F(e){"hidden"===document.visibilityState&&($c=e.timeStamp,removeEventListener("visibilitychange",F,!0))},!0),y(),self.webVitals={firstInputPolyfill:function(e){Hc.push(e),Xc()},resetFirstInputPolyfill:y,get firstHiddenTime(){return $c}},new A({name:"webVitals"}),0),j=(Jo(Kc=as,n=Jc=S),Kc.prototype=null===n?Object.create(n):(us.prototype=n.prototype,new us),as.prototype.getBean=function(t){var n=this;return void 0===t&&(t=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(e){return-1===t.indexOf(e)}).map(function(e){return"from"===e?"from="+n.getCurrentPageUrl():e+"="+n.bean[e]}).join("&")},as.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return"function"==typeof this.config.urlHandler&&(e=this.config.urlHandler()),encodeURIComponent(e)},as.prototype.request=function(e,t,n){var r,o,i,a;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=a,a=e.method||"get",(e=(o=this.config.onBeforeRequest)?o(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((r=new XMLHttpRequest).sendByAegis=!0,r.addEventListener("readystatechange",function(){4===r.readyState&&(400<=r.status||0===r.status?null!=n&&n(r.response):null!=t&&t(r.response))}),"get"===a.toLocaleLowerCase()?(r.open("get",(o=e.url,i=e.data,"string"!=typeof o?"":"object"===vo(i)&&i?(a=Object.getOwnPropertyNames(i).map(function(e){var t=i[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))}).join("&").replace(/eval/gi,"evaI"),o+(-1===o.indexOf("?")?"?":"&")+a):o)),r.send()):(r.open("post",e.url),e.contentType&&r.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),r.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},as.useAsyncPlugin=function(a,e){var u,c=void 0===(u=(e=void 0===e?{}:e).exportsConstructor)?"aegis-plugin-"+ns:u,t=e.onAegisInit,s=void 0===t?function(){}:t,t=e.onAegisInitAndPluginLoaded,f=void 0===t?function(){}:t;if(ns+=1,"string"!=typeof a)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof s||"function"!=typeof f)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new A({name:"asyncPlugin",onNewAegis:function(t){try{s(t),as.asyncPlugin[a]?f(t,window[as.asyncPlugin[a]]):(e=a,n=c,r=function(e){e||(as.asyncPlugin[a]=c,e=window[c],f(t,e))},o=document.createElement("script"),i=document.head,"function"==typeof n&&(r=n,n=""),o.src=e,o.setAttribute("name",n),o.name=n,o.setAttribute("crossorigin","anonymous"),o.crossorigin="anonymous",o.defer=!0,o.hasLoaded=!1,o.onreadystatechange=function(){o.hasLoaded||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(o.hasLoaded=!0,"function"==typeof r&&r(!1),setTimeout(function(){i.contains(o)&&i.removeChild(o)}))},o.onload=o.onreadystatechange,o.onerror=function(){"function"==typeof r&&r(!0),setTimeout(function(){i.contains(o)&&i.removeChild(o)})},"complete"===document.readyState?i.appendChild(o):window.addEventListener("load",function(){i.appendChild(o)}))}catch(u){console.log("error on below is caused by "+a+" "),console.error(u)}var e,n,r,o,i}}))},as.prototype.publishPluginsLogs=function(){var e=as.installedPlugins.find(function(e){return"reportAssetSpeed"===e.name});null!=e&&e.option.collectNotReportedLog(this)},as.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},as.sessionID="session-"+Date.now(),as.asyncPlugin={},as.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js",shadowLog:""},as),rs=new A({name:"offlineLog"}),os=function(e,h){var g=[],y=null,v=null,m=function(e){v=e},b=function(e){g=g.concat(e)},w=function(e,t){y={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};j.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",b),e.lifeCycle.on("uploadLogs",w),e.lifeCycle.on("onConfigChange",m)},onAegisInitAndPluginLoaded:function(r,e){var t,n,o,i,a,u,c=h.dbConfig,c=void 0===c?{}:c,s=h.url,s=void 0===s?j.urls.aegisCollect:s,f=h.offlineLogExp,f=void 0===f?3:f,l=h.id,d=h.uin,s=(null!=(t=r.lifeCycle)&&t.remove("beforeWrite",b),null!=(t=r.lifeCycle)&&t.remove("uploadLogs",w),null!=(t=r.lifeCycle)&&t.remove("onConfigChange",m),Object.assign({lookupUrl:s+"/offlineAuto?id="+l,preservedDay:f,id:l,uin:d,aid:(null==(t=r.bean)?void 0:t.aid)||"",beforeRequest:r.config.beforeRequest,afterRequest:r.config.afterRequest},c,{sessionId:j.sessionID}));try{var p=new e(s);g.forEach(function(e){p.add(P(P({},e),{level:e.level===I.INFO_ALL?I.INFO:e.level}))}),null!=(n=r.lifeCycle)&&n.on("beforeWrite",function(e){(e=void 0===e?[]:e).forEach(function(e){p.add(P(P({},e),{level:e.level===I.INFO_ALL?I.INFO:e.level}))})}),null!=(o=r.lifeCycle)&&o.on("uploadLogs",function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),p.uploadLogs(Object.assign({id:h.id,uin:h.uin,aid:null==(n=r.bean)?void 0:n.aid},e),t)}),null!=(i=r.lifeCycle)&&i.on("onConfigChange",function(e){p.setConfig(e)}),null!=(a=r.lifeCycle)&&a.on("destroy",function(){0===rs.countInstance()&&(g.length=0,"function"==typeof((y=null)==p?void 0:p.destroy)&&p.destroy())}),p.on("PERREVENT",function(e){r.sendPipeline([function(e,t){n={msg:ka(e),level:I.INFO};var n=(n=Array.isArray(n)?n:[n]).map(function(t,n){return Object.getOwnPropertyNames(t).map(function(e){return Oa(e)+"["+n+"]="+(t[e]===undefined?"":Oa(t[e]))}).join("&")}).join("&")+(n.length?"&count="+n.length:"");t({type:L.OFFLINE,data:n,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:h.url+"?id=893&sessionId="+j.sessionID+"&uin="+h.uin+"&from="+h.id+"&count=1&version=1.36.2",log:e})}],L.OFFLINE)(e)}),v&&(p.setConfig(v),v=null),y&&(null!=(u=r.lifeCycle)&&u.emit("uploadLogs",y.conds,y.params),y=null),r.flog=p}catch(Z){console.log(Z)}}})},Bu=rs=new A({name:"offlineLog",onNewAegis:function(e){os(j.urls.flog,e.config)}}),e=(new A({name:"spa"}),new A({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null==(e=location.href)?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(n){var r=history[n],e="__"+n+"__hasWrittenByTamSpa";return"function"==typeof r&&!history[e]&&(Object.defineProperty(history,e,{value:!0,enumerable:!1}),function(){var e=r.apply(this,arguments),t=null;return"function"==typeof Event?t=new Event(n):(t=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),window.dispatchEvent(t),e})},sendPv:function(){var t=this;setTimeout(function(){var r=location.href,e=(null==(e=location.href)?void 0:e.split("?"))[0];e&&e!==t.$fireUrl&&(t.$walk(function(n){n.sendPipeline([function(e,t){t({url:n.config.pvUrl+"?from="+encodeURIComponent(r),beanFilter:["from"],type:L.PV})}],L.PV)(null)}),t.$fireUrl=e)},0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}})),B=(new A({name:"ie"}),new A({name:"ie",init:function(){this.overrideAegisSend(),this.startListen()},startListen:function(){var n=this,r=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.publishErrorLog({msg:(e[0]||"")+" @ ("+(e[1]||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+ka(e[4]||""),level:I.ERROR}),null!=r&&r.call.apply(r,Ko([window],e))}},overrideAegisSend:function(){j.prototype.request=function(e,t,n){var r,o,i=this;e&&"string"==typeof e.url&&""!==e.url&&this.bean.id&&(r=e.url,!1!==e.addBean&&(r=r+(-1===r.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),(o=new Image).onload=function(){i.request(e,t,n),null!=t&&t(null)},o.onerror=function(){i.request(e,t,n),null!=n&&n(null)},e.data?o.src=r+"&"+e.data:o.src=r)}},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){this.option.publishErrorLog=function(){}}})),is=window.navigator.userAgent.toLowerCase(),k={},N=function(e){return-1!==is.indexOf(e)};function as(e){var t,n,r,o,i,u=Jc.call(this,e)||this;u.sendNow=!1,u.speedLogPipeline=tu([Va(u),(o=u.config,i={},function(e,t){var n,r;o.speedSample?(r="object"===vo(o.repeat)?o.repeat:{repeat:o.repeat},n=+r.speed||+r.repeat||5,Array.isArray(e)?(r=e.filter(function(e){var t=!i[e.url]||i[e.url]<n;return i[e.url]=1+~~i[e.url],t})).length&&t(r):(!i[e.url]||i[e.url]<n)&&(i[e.url]=1+~~i[e.url],t(e))):t(e)}),(r=u,function(t,n){zc(function(e){r.extendBean("netType",e),n(t)})}),function(e,t){u.lifeCycle.emit("beforeReportSpeed",e);var o=u.config.beforeReportSpeed;if((e="function"==typeof o?e.filter(function(e){var t,n,r=!1!==o(e);return"fetch"===e.type&&e.ret===undefined&&e.payload&&(t=(n=Aa(e.payload.data.response,u.config.api,{url:e.payload.data.url,ctx:e.payload.data})||{}).code,n=n.isErr,e.ret=t,e.isErr=+n),r}):e).length)return t(e)},function(e){return u.sendPipeline([function(e,t){var n,r,o,i,a;t({type:L.SPEED,url:""+u.config.speedUrl,method:"post",data:(n=e,r=P(P({},u.bean),{from:u.getCurrentPageUrl()}),i={fetch:[],"static":[]},a=new FormData,Array.isArray(n)?n.forEach(function(e){var t=bu(e);i[e.type].push(t)}):(o=bu(n),i[n.type].push(o)),a.append("payload",Na(P({duration:i},r))),a),log:e})}],L.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),u.init(e),u.extendBean("sessionId",as.sessionID),u.extendBean("from",u.getCurrentPageUrl()),"undefined"!=typeof document&&u.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&u.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&u.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&u.extendBean("ext3",encodeURIComponent(e.ext3))}catch(d){console.warn(d),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),u.sendSDKError(d)}return u}function us(){this.constructor=Kc}k.macos=function(){return N("mac")},k.ios=function(){return k.iphone()||k.ipod()||k.ipad()},k.iphone=function(){return!k.windows()&&N("iphone")},k.ipod=function(){return N("ipod")},k.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return N("ipad")||e},k.android=function(){return!k.windows()&&N("android")},k.androidPhone=function(){return k.android()&&N("mobile")},k.androidTablet=function(){return k.android()&&!N("mobile")},k.blackberry=function(){return N("blackberry")||N("bb10")},k.blackberryPhone=function(){return k.blackberry()&&!N("tablet")},k.blackberryTablet=function(){return k.blackberry()&&N("tablet")},k.windows=function(){return N("windows")},k.windowsPhone=function(){return k.windows()&&N("phone")},k.windowsTablet=function(){return k.windows()&&N("touch")&&!k.windowsPhone()},k.fxos=function(){return(N("(mobile")||N("(tablet"))&&N(" rv:")},k.fxosPhone=function(){return k.fxos()&&N("mobile")},k.fxosTablet=function(){return k.fxos()&&N("tablet")},k.meego=function(){return N("meego")},k.cordova=function(){return window.cordova&&"file:"===location.protocol},k.nodeWebkit=function(){return"object"===vo(window.process)},k.mobile=function(){return k.androidPhone()||k.iphone()||k.ipod()||k.windowsPhone()||k.blackberryPhone()||k.fxosPhone()||k.meego()},k.tablet=function(){return k.ipad()||k.androidTablet()||k.blackberryTablet()||k.windowsTablet()||k.fxosTablet()},k.desktop=function(){return!k.tablet()&&!k.mobile()},new A({name:"onClose"});h=new A({name:"onClose",onNewAegis:function(){var t,n,e,r,o=this;k.desktop()?(r=window.onunload,window.onunload=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.publishNotReportedLog(),null!=r&&r.call.apply(r,Ko([window],e))}):(t=this.publishNotReportedLog.bind(this),n=!0,e=function v(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),n&&(removeEventListener("visibilitychange",v,!0),removeEventListener("pagehide",v,!0)))},addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},publishNotReportedLog:function(){var t=this;this.$walk(function(e){e.sendNow=!0,e.publishPluginsLogs(),t.publishThrottlePipeLogs(e)})},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}});return j.use(w),j.use(T),j.use(a),j.use(E),j.use(u),j.use(r),j.use(Bu),j.use(e),j.use(B),j.use(h),j});
